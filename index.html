<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>我们的婚礼 | 邀请函</title>
  <style>
    /* --- 基础设置 --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: "PingFang SC", "Microsoft YaHei", serif; background-color: #000; color: #fff; overflow: hidden; }

    /* --- 全屏滚动容器 --- */
    .h5-container { height: 100vh; width: 100vw; overflow-y: scroll; scroll-snap-type: y mandatory; scroll-behavior: smooth; }

    /* --- 每一屏通用样式 --- */
    section { height: 100vh; width: 100vw; scroll-snap-align: start; position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; background-size: cover; background-position: center; text-align: center; }

    /* 遮罩层 */
    section::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.2); z-index: 1; }
    #text1::before { background: rgba(0, 0, 0, 0.0); }
    #page1::before { background: rgba(0, 0, 0, 0.2); }

    .content { position: relative; z-index: 2; width: 90%; padding: 20px; }

    /* --- 动画类 --- */
    .animate-up { opacity: 0; transform: translateY(50px); transition: all 1s ease-out; }
    section.active .animate-up { opacity: 1; transform: translateY(0); }
    .delay-1 { transition-delay: 0.2s; }
    .delay-2 { transition-delay: 0.5s; }
    .delay-3 { transition-delay: 0.8s; }

    /* --- 字体 --- */
    h1 { font-size: 2.8rem; font-family: 'Times New Roman', serif; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); }
    h2 { font-size: 1.8rem; margin-bottom: 20px; color: #fce7cf; border-bottom: 1px solid rgba(255, 255, 255, 0.5); display: inline-block; padding-bottom: 10px; }
    p { font-size: 1.1rem; line-height: 1.8; margin-bottom: 10px; letter-spacing: 1px; }

    /* --- 底部箭头 --- */
    .arrow-up { position: fixed; bottom: 20px; left: 50%; width: 30px; height: 30px; border-left: 2px solid #fff; border-top: 2px solid #fff; transform: translateX(-50%) rotate(45deg); animation: arrowMove 1.5s infinite; z-index: 10; }
    @keyframes arrowMove { 0% { opacity: 0; bottom: 20px; } 50% { opacity: 1; bottom: 30px; } 100% { opacity: 0; bottom: 40px; } }

    /* --- 音乐图标 --- */
    .music-icon { position: fixed; top: 20px; right: 20px; width: 40px; height: 40px; border-radius: 50%; background: rgba(0, 0, 0, 0.5) url('https://cdn-icons-png.flaticon.com/512/109/109197.png') no-repeat center center; background-size: 60%; border: 2px solid #fff; z-index: 999; animation: rotate 4s linear infinite; cursor: pointer; }
    .music-paused { animation-play-state: paused; opacity: 0.7; }
    @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

    /* --- 相册滚动 --- */
    .gallery-h-scroll { display: flex; overflow-x: auto; gap: 15px; padding: 20px 0; width: 100%; scrollbar-width: none; }
    .gallery-h-scroll::-webkit-scrollbar { display: none; }
    .gallery-item { flex: 0 0 70%; height: 350px; border-radius: 8px; overflow: hidden; border: 2px solid #fff; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); scroll-snap-align: center; position: relative; }
    .gallery-item img { width: 100%; height: 100%; object-fit: cover; }
    /* 添加放大镜提示图标 */
    .gallery-item::after { content: ''; position: absolute; bottom: 10px; right: 10px; font-size: 1.2rem; opacity: 0.7; text-shadow: 0 1px 2px rgba(0,0,0,0.5); pointer-events: none; }

    /* --- 图片放大查看器 (Lightbox) --- */
    .lightbox {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.9); z-index: 10000;
      display: none; /* 默认隐藏 */
      justify-content: center; align-items: center;
      flex-direction: column;
      animation: fadeIn 0.3s ease;
    }
    .lightbox img { max-width: 95%; max-height: 80%; border-radius: 5px; box-shadow: 0 0 20px rgba(255,255,255,0.2); }
    .lightbox p { margin-top: 15px; color: #ccc; font-size: 0.9rem; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    /* --- 背景图设置 --- */
    #page1 { background-image: url('https://gitee.com/edison-hu/document/raw/master/images/00.jpg'); }
    #text1 { background-color: #FFFFFF; color: #101010; padding: 20px; }
    #page2 { background-image: url('https://gitee.com/edison-hu/document/raw/master/images/01.jpg'); }
    #page3 { background-color: #FFFFFF; }
    #page4 { background-image: url('https://gitee.com/edison-hu/document/raw/master/images/04.jpg'); }

    /* 邀请函设计样式 */
    .invitation-design { width: 100%; max-width: 600px; margin: 0 auto; position: relative; }
    .invitation-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding: 0 20px; }
    .invitation-header h3 { font-size: 1.5rem; color: #D4A373; font-weight: normal; }
    .divider { width: 30%; height: 1px; background-color: #D4A373; }
    .invitation-content { text-align: center; margin-bottom: 40px; }
    .invitation-label { font-size: 1rem; color: #666; margin-bottom: 20px; }
    .double-happiness { font-size: 4rem; color: #D4A373; margin-bottom: 20px; font-family: 'SimSun', serif; }
    .invitation-title { font-size: 2rem; color: #D4A373; margin-bottom: 30px; letter-spacing: 0.3em; font-weight: normal; font-family: 'Times New Roman', serif; }
    .invitation-text { font-size: 1.1rem; color: #333; line-height: 1.8; margin-bottom: 40px; padding: 0 20px; }
    .invitation-text p { margin-bottom: 10px; }
  </style>
</head>

<body>

  <audio id="bgm" loop preload="auto">
    <source src="https://gitee.com/edison-hu/document/raw/master/MP3/geinimen.mp3" type="audio/mpeg">
  </audio>
  <div class="music-icon" id="musicBtn"></div>
  <div class="arrow-up"></div>

  <div class="lightbox" id="lightbox" onclick="closeLightbox()">
    <img id="lightbox-img" src="" alt="放大图片">
    <p>点击任意处关闭</p>
  </div>

  <div class="h5-container">
    <section id="page1" class="active">
      <div class="content" style="margin-top: 300px;">
        <p class="animate-up">The Wedding Of</p>
        <h1 class="animate-up delay-1">赵政 & 陈莹莹</h1>
        <p class="animate-up delay-2">一定是特别的缘分</p>
        <p class="animate-up delay-2">才可以一路走来变成了一家人</p>
      </div>
    </section>

    <section id="text1">
      <div class="content">
        <div class="invitation-design">
          <div class="invitation-header">
            <h3>相爱</h3>
            <div class="divider"></div>
            <h3>相守</h3>
          </div>
          <div class="invitation-content">
            <p class="invitation-label">{诚挚邀请}</p>
            <div class="double-happiness">囍</div>
            <h2 class="invitation-title">INVITATION</h2>
            <div class="invitation-text">
              <p>我们一起起始这段旅程</p>
              <p>两颗心跳动如一</p>
              <p>我们面对前方的路</p>
              <p>以爱作为我们的指南</p>
              <br>
              <p>我们可能会跌倒，可能会摔倒</p>
              <p>但我们会站起来，</p>
              <p>继续前行因为这段旅程值得我们付出</p>
              <br>
              <p>当我们在一起，手牵着手</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="page2"></section>

    <section id="page3">
      <div class="content">
        <h2 class="animate-up">甜蜜瞬间</h2>
        <div class="gallery-h-scroll animate-up delay-1" id="galleryContainer">
          <div class="gallery-item" onclick="showLightbox(this.querySelector('img').src)"><img src="https://gitee.com/edison-hu/document/raw/master/images/1.jpg"></div>
          <div class="gallery-item" onclick="showLightbox(this.querySelector('img').src)"><img src="https://gitee.com/edison-hu/document/raw/master/images/224bbfad474731841f04dfabed3a5704.jpg"></div>
          <div class="gallery-item" onclick="showLightbox(this.querySelector('img').src)"><img src="https://gitee.com/edison-hu/document/raw/master/images/2031425bd48ed424df58e956f80f0e70.jpg"></div>
          <div class="gallery-item" onclick="showLightbox(this.querySelector('img').src)"><img src="https://gitee.com/edison-hu/document/raw/master/images/6d8b2d162372b88cd973ed6f09a5320a.jpg"></div>
          <div class="gallery-item" onclick="showLightbox(this.querySelector('img').src)"><img src="https://gitee.com/edison-hu/document/raw/master/images/6f66398a8dddad349f1024c779ac9fe0.jpg"></div>
          <div class="gallery-item" onclick="showLightbox(this.querySelector('img').src)"><img src="https://gitee.com/edison-hu/document/raw/master/images/3a3cec09129bf29b0263bb56b11f859a.jpg"></div>
          <div class="gallery-item" onclick="showLightbox(this.querySelector('img').src)"><img src="https://gitee.com/edison-hu/document/raw/master/images/9d1bfd73f77080e7a11662e3e9ac3752.jpg"></div>
          <div class="gallery-item" onclick="showLightbox(this.querySelector('img').src)"><img src="https://gitee.com/edison-hu/document/raw/master/images/3608b13abc72e98b263d16dedaeb0514.jpg"></div>
          <div class="gallery-item" onclick="showLightbox(this.querySelector('img').src)"><img src="https://gitee.com/edison-hu/document/raw/master/images/7f7e624e4d2c6d0351cab37da63d2874.jpg"></div>
          <div class="gallery-item" onclick="showLightbox(this.querySelector('img').src)"><img src="https://gitee.com/edison-hu/document/raw/master/images/a8dc636601c846e2f3c1b2cca2e0f64d.jpg"></div>
        </div>
      </div>
    </section>

    <section id="page4">
      <div class="content">
        <h2 class="animate-up">敬备喜酌</h2>
        <div class="animate-up delay-1"
          style="background:rgba(255,255,255,0.2); color:#333; padding:20px; border-radius:10px; margin-top:300px;">
          <p style="font-size: 1.3rem; font-weight: bold; margin: 20px 0;">·喜宴时间·</p>
          <p style="margin-bottom: 5px;">2026年2月11日 星期三</p>
          <p style="margin-bottom: 20px;">农历腊月廿四 14:00</p>
          <p style="font-size: 1.3rem; font-weight: bold; margin: 20px 0;">·喜宴席设·</p>
          <p style="margin-bottom: 10px;">丁司垱镇路庙铺村赵家冲2组</p>
          <a href="javascript:void(0);" onclick="startNavigation()"
            style="display:block; background:#d4a373; color:white; text-decoration:none; padding:12px; border-radius:5px; margin-top:15px; text-align:center; font-weight:bold; font-size:16px; cursor: pointer;">
            一键导航 
          </a>
        </div>
      </div>
    </section>
  </div>

  <script>
    // --- 1. 变量定义 ---
    const bgm = document.getElementById('bgm');
    const musicBtn = document.getElementById('musicBtn');
    let isPlaying = false;
    let hasInitialized = false;

    // --- 2. 音乐播放逻辑 ---
    function tryPlayMusic() {
      if (hasInitialized) return;
      bgm.currentTime = 16;
      const playPromise = bgm.play();
      if (playPromise !== undefined) {
        playPromise.then(() => {
          isPlaying = true;
          hasInitialized = true;
          musicBtn.classList.remove('music-paused');
          document.removeEventListener('touchstart', tryPlayMusic);
          document.removeEventListener('click', tryPlayMusic);
        }).catch(error => {
          isPlaying = false;
          musicBtn.classList.add('music-paused');
        });
      }
    }

    function initWeChatAudio() {
        if (typeof WeixinJSBridge == "object" && typeof WeixinJSBridge.invoke == "function") {
            WeixinJSBridge.invoke('getNetworkType', {}, function (res) {
                bgm.load(); 
                setTimeout(tryPlayMusic, 500);
            });
        } else {
             document.addEventListener("WeixinJSBridgeReady", function () {
                bgm.load();
                setTimeout(tryPlayMusic, 500);
             }, false);
        }
    }
    initWeChatAudio();
    document.addEventListener('DOMContentLoaded', () => { setTimeout(tryPlayMusic, 500); });
    document.addEventListener('touchstart', tryPlayMusic, { once: true });
    document.addEventListener('click', tryPlayMusic, { once: true });

    musicBtn.addEventListener('click', function (e) {
      e.stopPropagation(); 
      if (isPlaying) {
        bgm.pause();
        musicBtn.classList.add('music-paused');
      } else {
        if (!hasInitialized) { bgm.currentTime = 16; hasInitialized = true; }
        bgm.play();
        musicBtn.classList.remove('music-paused');
      }
      isPlaying = !isPlaying;
    });

    // --- 3. 导航逻辑 ---
    function startNavigation() {
      var destinationName = "丁司垱镇路庙铺村赵家冲2组";
      var lat = 30.34;
      var lng = 115.31;
      var u = navigator.userAgent;
      var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);

      if (isiOS) {
        window.location.href = "http://maps.apple.com/?daddr=" + encodeURIComponent(destinationName) + "&ll=" + lat + "," + lng + "&dirflg=d";
      } else {
        var gaodeUrl = "https://uri.amap.com/marker?position=" + lng + "," + lat + "&name=" + encodeURIComponent(destinationName) + "&src=wedding&coordinate=gaode&callnative=1";
        window.location.href = gaodeUrl;
      }
    }

    // --- 4. 相册自动滚动与点击放大功能 ---
    
    // 自动滚动控制变量
    let scrollInterval = null;
    const galleryContainer = document.getElementById('galleryContainer');

    // 开启自动滚动
    function startAutoScroll() {
        if (scrollInterval) return; 
        scrollInterval = setInterval(() => {
            if (galleryContainer) {
                if (galleryContainer.scrollLeft >= (galleryContainer.scrollWidth - galleryContainer.clientWidth)) {
                     stopAutoScroll(); 
                } else {
                    galleryContainer.scrollLeft += 1;
                }
            }
        }, 25);
    }

    // 停止自动滚动
    function stopAutoScroll() {
        if (scrollInterval) {
            clearInterval(scrollInterval);
            scrollInterval = null;
        }
    }

    // 放大图片 (Lightbox)
    function showLightbox(src) {
        // 打开大图时，先停止背景滚动
        stopAutoScroll(); 
        
        const lightbox = document.getElementById('lightbox');
        const img = document.getElementById('lightbox-img');
        img.src = src;
        lightbox.style.display = 'flex';
    }

    // 关闭图片 (修复点：关闭后恢复滚动)
    function closeLightbox() {
        document.getElementById('lightbox').style.display = 'none';
        
        // 关键修复：关闭大图后，重新启动自动滚动
        startAutoScroll();
    }

    // 用户手动触摸时停止滚动
    if(galleryContainer) {
        galleryContainer.addEventListener('touchstart', stopAutoScroll);
        galleryContainer.addEventListener('mousedown', stopAutoScroll);
    }


    // --- 5. 页面滚动监听 ---
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('active');
          
          if (entry.target.id === 'page3') {
              setTimeout(startAutoScroll, 800);
          } else {
              stopAutoScroll();
          }

          if (entry.target.id === 'page4') {
            document.querySelector('.arrow-up').style.display = 'none';
          } else {
            document.querySelector('.arrow-up').style.display = 'block';
          }
        } else {
          entry.target.classList.remove('active');
        }
      });
    }, { threshold: 0.3 });

    document.querySelectorAll('section').forEach(section => observer.observe(section));
  </script>
</body>
</html>